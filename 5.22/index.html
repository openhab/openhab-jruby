<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: USAGE
  
    &mdash; openHAB JRuby
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

  <link rel="stylesheet" href="css/fonts.css" type="text/css" />

  <link rel="stylesheet" href="css/navbar.css" type="text/css" />

  <link rel="stylesheet" href="css/sidebar.css" type="text/css" />

  <link rel="stylesheet" href="css/coderay.css" type="text/css" />

<script type="text/javascript">
  pathId = "USAGE";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>
  <script type="text/javascript" charset="utf-8" src="/openhab-jruby/js/versions.js"></script>


    <meta property="og:description" name="description" content="Documentation for openhab-scripting JRuby helper library.">
    <meta property="og:image" content="https://raw.githubusercontent.com/jruby/collateral/master/logos/PNGs/circle-fill/full-color/jruby-logo-circle-logo-fill-outline-medium.png">
    <meta property="og:image:alt" content="The JRuby logo">
    <script type="text/javascript">
      indexpath = 'index.json';
      base_url = '';
    </script>
  </head>
  <body>
    <div id="app">
      <header class="navbar">
        <div class="sidebar-button">
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon">
            <path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path>
          </svg>
        </div>
        <a href="index.html">
          <img src="docs/images/openhab-logo.png" alt="openHAB" class="logo can-hide">
          <img src="docs/images/jrubyscripting.png" alt="openHAB" class="logo">
          <span class="site-name can-hide">openHAB</span>
        </a>
        <div class="links">
          <form class="search-box" role="search" style="display: none">
  <input id="search-input" class="search-query ds-input" placeholder autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-label="search input" style="position: relative, vertical-align: top;">
  <div class="search-results" role="listbox">
    <ul></ul>
  </div>
</form>

          <nav class="nav-links can-hide">
            <div class="nav-item">
  <a href="https://github.com/openhab/openhab-jruby" target="_blank" rel="noopener noreferrer" class="nav-link external">GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
</div>

          </nav>
        </div>
      </header>

      <div class="sidebar-mask"></div>
      <aside class="sidebar">
        <nav class="nav-links">
          <div class="nav-item">
  <a href="https://github.com/openhab/openhab-jruby" target="_blank" rel="noopener noreferrer" class="nav-link external">GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
</div>

        </nav>
        <div class="page-versions">
  <ul class="version-switcher">
    <li><a href="/openhab-jruby/5.22" class="version-button stable">Stable <small>(5.22)</small></a></li>
    <li><a href="/openhab-jruby/main" class="version-button main">Latest <small>(main)</small></a></li>
  </ul>
  <div class="archived-versions">
    <div class="dropdown-wrapper">
      <a class="dropdown-title">
        <span class="title">Archived</span>
        <span class="arrow down"></span>
      </a>
      <ul class="nav-dropdown" id="version-dropdown">
        
      </ul>
    </div>
  </div>
  
  
</div>


        
        <ul class="sidebar-links">
          <li>
            <section class="sidebar-group">
              <p class="sidebar-heading"><span><a href="index.html">Getting Started</a></span><a class="arrow toggle down"></a></p>
              <ul class="sidebar-links sidebar-group-items">
                
  <li>
    
    <span class="sidebar-link active">
      <a class="sidebar-link" href="index.html" title="USAGE">USAGE</a>
    </span>
    
  </li>

  <li>
    
    <span class="sidebar-link">
      <a class="sidebar-link" href="file.CHANGELOG.html" title="CHANGELOG">CHANGELOG</a>
    </span>
    
  </li>

  <li>
    
    <span class="sidebar-link">
      <a class="sidebar-link" href="file.CONTRIBUTING.html" title="Contributing">Contributing</a>
    </span>
    
  </li>

  <li>
    
    <span class="sidebar-link">
      <a class="sidebar-link" href="file.README.html" title="README">README</a>
    </span>
    
  </li>

  <li>
    
    <span class="sidebar-link">
      <a class="sidebar-link" href="file.conversions.html" title="Rule Conversions">Rule Conversions</a>
    </span>
    
  </li>

  <li>
    
    <span class="sidebar-link">
      <a class="sidebar-link" href="file.examples.html" title="Examples">Examples</a>
    </span>
    
  </li>

  <li>
    
    <span class="sidebar-link">
      <a class="sidebar-link" href="file.ruby-basics.html" title="Ruby Basics">Ruby Basics</a>
    </span>
    
  </li>

  <li>
    
    <span class="sidebar-link">
      <a class="sidebar-link" href="file.testing.html" title="Testing Your Rules">Testing Your Rules</a>
    </span>
    
  </li>


              </ul>
            </section>
          </li>
          
          <li>
            <section class="sidebar-group collapsed">              
              <p class="sidebar-heading"><span><span class='object_link'><a href="top-level-namespace.html" title="Top Level Namespace (root)">Classes</a></span></span><a class="arrow toggle right"></a></p>
              <ul class="sidebar-links sidebar-group-items class-list">
                
  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-0" href="OpenHAB.html" title="OpenHAB (module)">OpenHAB</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-1" href="OpenHAB/Core.html" title="OpenHAB::Core (module)">Core</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/AbstractUID.html" title="OpenHAB::Core::AbstractUID (class)">AbstractUID</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/Actions.html" title="OpenHAB::Core::Actions (module)">Actions</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Actions/Audio.html" title="OpenHAB::Core::Actions::Audio (class)">Audio</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Actions/Ephemeris.html" title="OpenHAB::Core::Actions::Ephemeris (class)">Ephemeris</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Actions/Exec.html" title="OpenHAB::Core::Actions::Exec (class)">Exec</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Actions/HTTP.html" title="OpenHAB::Core::Actions::HTTP (class)">HTTP</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Actions/Notification.html" title="OpenHAB::Core::Actions::Notification (class)">Notification</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Actions/Ping.html" title="OpenHAB::Core::Actions::Ping (class)">Ping</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Actions/Transformation.html" title="OpenHAB::Core::Actions::Transformation (class)">Transformation</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Actions/Voice.html" title="OpenHAB::Core::Actions::Voice (class)">Voice</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  

        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/Configuration.html" title="OpenHAB::Core::Configuration (class)">Configuration</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/DTO.html" title="OpenHAB::Core::DTO (module)">DTO</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/DTO/AbstractThingDTO.html" title="OpenHAB::Core::DTO::AbstractThingDTO (class)">AbstractThingDTO</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/DTO/ItemChannelLinkDTO.html" title="OpenHAB::Core::DTO::ItemChannelLinkDTO (class)">ItemChannelLinkDTO</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/EmulateHash.html" title="OpenHAB::Core::EmulateHash (module)">EmulateHash</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/EntityLookup.html" title="OpenHAB::Core::EntityLookup (module)">EntityLookup</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/Events.html" title="OpenHAB::Core::Events (module)">Events</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/AbstractEvent.html" title="OpenHAB::Core::Events::AbstractEvent (class)">AbstractEvent</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/AbstractItemChannelLinkRegistryEvent.html" title="OpenHAB::Core::Events::AbstractItemChannelLinkRegistryEvent (class)">AbstractItemChannelLinkRegistryEvent</a></span>
      
        &lt; AbstractEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/AbstractItemRegistryEvent.html" title="OpenHAB::Core::Events::AbstractItemRegistryEvent (class)">AbstractItemRegistryEvent</a></span>
      
        &lt; AbstractEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/AbstractThingRegistryEvent.html" title="OpenHAB::Core::Events::AbstractThingRegistryEvent (class)">AbstractThingRegistryEvent</a></span>
      
        &lt; AbstractEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ChannelTriggeredEvent.html" title="OpenHAB::Core::Events::ChannelTriggeredEvent (class)">ChannelTriggeredEvent</a></span>
      
        &lt; AbstractEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ItemAddedEvent.html" title="OpenHAB::Core::Events::ItemAddedEvent (class)">ItemAddedEvent</a></span>
      
        &lt; AbstractItemRegistryEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ItemChannelLinkAddedEvent.html" title="OpenHAB::Core::Events::ItemChannelLinkAddedEvent (class)">ItemChannelLinkAddedEvent</a></span>
      
        &lt; AbstractItemChannelLinkRegistryEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ItemChannelLinkRemovedEvent.html" title="OpenHAB::Core::Events::ItemChannelLinkRemovedEvent (class)">ItemChannelLinkRemovedEvent</a></span>
      
        &lt; AbstractItemChannelLinkRegistryEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ItemCommandEvent.html" title="OpenHAB::Core::Events::ItemCommandEvent (class)">ItemCommandEvent</a></span>
      
        &lt; ItemEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ItemEvent.html" title="OpenHAB::Core::Events::ItemEvent (class)">ItemEvent</a></span>
      
        &lt; AbstractEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ItemRemovedEvent.html" title="OpenHAB::Core::Events::ItemRemovedEvent (class)">ItemRemovedEvent</a></span>
      
        &lt; AbstractItemRegistryEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ItemState.html" title="OpenHAB::Core::Events::ItemState (module)">ItemState</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ItemStateChangedEvent.html" title="OpenHAB::Core::Events::ItemStateChangedEvent (class)">ItemStateChangedEvent</a></span>
      
        &lt; ItemEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ItemStateEvent.html" title="OpenHAB::Core::Events::ItemStateEvent (class)">ItemStateEvent</a></span>
      
        &lt; ItemEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ItemStateUpdatedEvent.html" title="OpenHAB::Core::Events::ItemStateUpdatedEvent (class)">ItemStateUpdatedEvent</a></span>
      
        &lt; ItemEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ItemTimeSeriesUpdatedEvent.html" title="OpenHAB::Core::Events::ItemTimeSeriesUpdatedEvent (class)">ItemTimeSeriesUpdatedEvent</a></span>
      
        &lt; ItemEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ItemUpdatedEvent.html" title="OpenHAB::Core::Events::ItemUpdatedEvent (class)">ItemUpdatedEvent</a></span>
      
        &lt; AbstractItemRegistryEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/StartlevelEvent.html" title="OpenHAB::Core::Events::StartlevelEvent (class)">StartlevelEvent</a></span>
      
        &lt; AbstractEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ThingAddedEvent.html" title="OpenHAB::Core::Events::ThingAddedEvent (class)">ThingAddedEvent</a></span>
      
        &lt; AbstractThingRegistryEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ThingRemovedEvent.html" title="OpenHAB::Core::Events::ThingRemovedEvent (class)">ThingRemovedEvent</a></span>
      
        &lt; AbstractThingRegistryEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ThingStatusInfoChangedEvent.html" title="OpenHAB::Core::Events::ThingStatusInfoChangedEvent (class)">ThingStatusInfoChangedEvent</a></span>
      
        &lt; AbstractEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ThingStatusInfoEvent.html" title="OpenHAB::Core::Events::ThingStatusInfoEvent (class)">ThingStatusInfoEvent</a></span>
      
        &lt; AbstractEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/ThingUpdatedEvent.html" title="OpenHAB::Core::Events::ThingUpdatedEvent (class)">ThingUpdatedEvent</a></span>
      
        &lt; AbstractThingRegistryEvent
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Events/TimerEvent.html" title="OpenHAB::Core::Events::TimerEvent (class)">TimerEvent</a></span>
      
        &lt; AbstractEvent
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/Items.html" title="OpenHAB::Core::Items (module)">Items</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/CallItem.html" title="OpenHAB::Core::Items::CallItem (class)">CallItem</a></span>
      
        &lt; GenericItem
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/ColorItem.html" title="OpenHAB::Core::Items::ColorItem (class)">ColorItem</a></span>
      
        &lt; DimmerItem
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/ContactItem.html" title="OpenHAB::Core::Items::ContactItem (class)">ContactItem</a></span>
      
        &lt; GenericItem
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/DateTimeItem.html" title="OpenHAB::Core::Items::DateTimeItem (class)">DateTimeItem</a></span>
      
        &lt; GenericItem
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/DimmerItem.html" title="OpenHAB::Core::Items::DimmerItem (class)">DimmerItem</a></span>
      
        &lt; SwitchItem
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/GenericItem.html" title="OpenHAB::Core::Items::GenericItem (class)">GenericItem</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/GroupFunction.html" title="OpenHAB::Core::Items::GroupFunction (module)">GroupFunction</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/GroupItem.html" title="OpenHAB::Core::Items::GroupItem (class)">GroupItem</a></span>
      
        &lt; GenericItem
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-4" href="OpenHAB/Core/Items/GroupItem/Members.html" title="OpenHAB::Core::Items::GroupItem::Members (class)">Members</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  
  
  
  
  

        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/ImageItem.html" title="OpenHAB::Core::Items::ImageItem (class)">ImageItem</a></span>
      
        &lt; GenericItem
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/Item.html" title="OpenHAB::Core::Items::Item (module)">Item</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/ItemChannelLinks.html" title="OpenHAB::Core::Items::ItemChannelLinks (class)">ItemChannelLinks</a></span>
      
        &lt; SimpleDelegator
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/LocationItem.html" title="OpenHAB::Core::Items::LocationItem (class)">LocationItem</a></span>
      
        &lt; GenericItem
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/Metadata.html" title="OpenHAB::Core::Items::Metadata (module)">Metadata</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-4" href="OpenHAB/Core/Items/Metadata/Hash.html" title="OpenHAB::Core::Items::Metadata::Hash (class)">Hash</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-4" href="OpenHAB/Core/Items/Metadata/NamespaceHash.html" title="OpenHAB::Core::Items::Metadata::NamespaceHash (class)">NamespaceHash</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-4" href="OpenHAB/Core/Items/Metadata/Provider.html" title="OpenHAB::Core::Items::Metadata::Provider (class)">Provider</a></span>
      
        &lt; Provider
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/NumberItem.html" title="OpenHAB::Core::Items::NumberItem (class)">NumberItem</a></span>
      
        &lt; GenericItem
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/NumericItem.html" title="OpenHAB::Core::Items::NumericItem (module)">NumericItem</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/Persistence.html" title="OpenHAB::Core::Items::Persistence (module)">Persistence</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-4" href="OpenHAB/Core/Items/Persistence/PersistedState.html" title="OpenHAB::Core::Items::Persistence::PersistedState (class)">PersistedState</a></span>
      
        &lt; SimpleDelegator
      
      
    </span>
    
    
  </li>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/PlayerItem.html" title="OpenHAB::Core::Items::PlayerItem (class)">PlayerItem</a></span>
      
        &lt; GenericItem
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/Provider.html" title="OpenHAB::Core::Items::Provider (class)">Provider</a></span>
      
        &lt; Provider
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/Registry.html" title="OpenHAB::Core::Items::Registry (class)">Registry</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/RollershutterItem.html" title="OpenHAB::Core::Items::RollershutterItem (class)">RollershutterItem</a></span>
      
        &lt; GenericItem
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/Semantics.html" title="OpenHAB::Core::Items::Semantics (module)">Semantics</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  
  
  
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-4" href="OpenHAB/Core/Items/Semantics/Provider.html" title="OpenHAB::Core::Items::Semantics::Provider (class)">Provider</a></span>
      
        &lt; Provider
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-4" href="OpenHAB/Core/Items/Semantics/SemanticTag.html" title="OpenHAB::Core::Items::Semantics::SemanticTag (module)">SemanticTag</a></span>
      
      
    </span>
    
    
  </li>

  
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-4" href="OpenHAB/Core/Items/Semantics/TagClassMethods.html" title="OpenHAB::Core::Items::Semantics::TagClassMethods (module)">TagClassMethods</a></span>
      
      
    </span>
    
    
  </li>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/StateStorage.html" title="OpenHAB::Core::Items::StateStorage (class)">StateStorage</a></span>
      
        &lt; SimpleDelegator
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/StringItem.html" title="OpenHAB::Core::Items::StringItem (class)">StringItem</a></span>
      
        &lt; GenericItem
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Items/SwitchItem.html" title="OpenHAB::Core::Items::SwitchItem (class)">SwitchItem</a></span>
      
        &lt; GenericItem
      
      
    </span>
    
    
  </li>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/LazyArray.html" title="OpenHAB::Core::LazyArray (module)">LazyArray</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/Provider.html" title="OpenHAB::Core::Provider (class)">Provider</a></span>
      
        &lt; org.openhab.core.common.registry.AbstractProvider
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/Registry.html" title="OpenHAB::Core::Registry (class)">Registry</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/Rules.html" title="OpenHAB::Core::Rules (module)">Rules</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Rules/Provider.html" title="OpenHAB::Core::Rules::Provider (class)">Provider</a></span>
      
        &lt; Provider
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Rules/Registry.html" title="OpenHAB::Core::Rules::Registry (class)">Registry</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Rules/Rule.html" title="OpenHAB::Core::Rules::Rule (module)">Rule</a></span>
      
      
    </span>
    
    
  </li>

  
  
  
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Rules/TaggedArray.html" title="OpenHAB::Core::Rules::TaggedArray (class)">TaggedArray</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  

        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/ScriptHandling.html" title="OpenHAB::Core::ScriptHandling (module)">ScriptHandling</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/Sitemaps.html" title="OpenHAB::Core::Sitemaps (module)">Sitemaps</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Sitemaps/Provider.html" title="OpenHAB::Core::Sitemaps::Provider (class)">Provider</a></span>
      
        &lt; Provider
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/Things.html" title="OpenHAB::Core::Things (module)">Things</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/AbstractDescriptionType.html" title="OpenHAB::Core::Things::AbstractDescriptionType (class)">AbstractDescriptionType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/Channel.html" title="OpenHAB::Core::Things::Channel (class)">Channel</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/ChannelDefinition.html" title="OpenHAB::Core::Things::ChannelDefinition (class)">ChannelDefinition</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/ChannelGroupDefinition.html" title="OpenHAB::Core::Things::ChannelGroupDefinition (class)">ChannelGroupDefinition</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/ChannelGroupType.html" title="OpenHAB::Core::Things::ChannelGroupType (class)">ChannelGroupType</a></span>
      
        &lt; AbstractDescriptionType
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/ChannelGroupTypeUID.html" title="OpenHAB::Core::Things::ChannelGroupTypeUID (class)">ChannelGroupTypeUID</a></span>
      
        &lt; UID
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/ChannelGroupUID.html" title="OpenHAB::Core::Things::ChannelGroupUID (class)">ChannelGroupUID</a></span>
      
        &lt; UID
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/ChannelType.html" title="OpenHAB::Core::Things::ChannelType (class)">ChannelType</a></span>
      
        &lt; AbstractDescriptionType
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/ChannelTypeUID.html" title="OpenHAB::Core::Things::ChannelTypeUID (class)">ChannelTypeUID</a></span>
      
        &lt; UID
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/ChannelUID.html" title="OpenHAB::Core::Things::ChannelUID (class)">ChannelUID</a></span>
      
        &lt; UID
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/ItemChannelLink.html" title="OpenHAB::Core::Things::ItemChannelLink (class)">ItemChannelLink</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/Links.html" title="OpenHAB::Core::Things::Links (module)">Links</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-4" href="OpenHAB/Core/Things/Links/Provider.html" title="OpenHAB::Core::Things::Links::Provider (class)">Provider</a></span>
      
        &lt; Provider
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/ProfileCallback.html" title="OpenHAB::Core::Things::ProfileCallback (module)">ProfileCallback</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/Provider.html" title="OpenHAB::Core::Things::Provider (class)">Provider</a></span>
      
        &lt; Provider
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/Registry.html" title="OpenHAB::Core::Things::Registry (class)">Registry</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/Thing.html" title="OpenHAB::Core::Things::Thing (module)">Thing</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-4" href="OpenHAB/Core/Things/Thing/ChannelsArray.html" title="OpenHAB::Core::Things::Thing::ChannelsArray (class)">ChannelsArray</a></span>
      
        &lt; Array
      
      
    </span>
    
    
  </li>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

        
      </ul>
    
  </li>

  
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/ThingType.html" title="OpenHAB::Core::Things::ThingType (class)">ThingType</a></span>
      
        &lt; AbstractDescriptionType
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/ThingTypeUID.html" title="OpenHAB::Core::Things::ThingTypeUID (class)">ThingTypeUID</a></span>
      
        &lt; UID
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/ThingUID.html" title="OpenHAB::Core::Things::ThingUID (class)">ThingUID</a></span>
      
        &lt; UID
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Things/UID.html" title="OpenHAB::Core::Things::UID (class)">UID</a></span>
      
        &lt; AbstractUID
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/Timer.html" title="OpenHAB::Core::Timer (class)">Timer</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/Types.html" title="OpenHAB::Core::Types (module)">Types</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/Command.html" title="OpenHAB::Core::Types::Command (module)">Command</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/DateTimeType.html" title="OpenHAB::Core::Types::DateTimeType (class)">DateTimeType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/DecimalType.html" title="OpenHAB::Core::Types::DecimalType (class)">DecimalType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/HSBType.html" title="OpenHAB::Core::Types::HSBType (class)">HSBType</a></span>
      
        &lt; PercentType
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/IncreaseDecreaseType.html" title="OpenHAB::Core::Types::IncreaseDecreaseType (class)">IncreaseDecreaseType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/NextPreviousType.html" title="OpenHAB::Core::Types::NextPreviousType (class)">NextPreviousType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/NumericType.html" title="OpenHAB::Core::Types::NumericType (module)">NumericType</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/OnOffType.html" title="OpenHAB::Core::Types::OnOffType (class)">OnOffType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/OpenClosedType.html" title="OpenHAB::Core::Types::OpenClosedType (class)">OpenClosedType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/PercentType.html" title="OpenHAB::Core::Types::PercentType (class)">PercentType</a></span>
      
        &lt; DecimalType
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/PlayPauseType.html" title="OpenHAB::Core::Types::PlayPauseType (class)">PlayPauseType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/PointType.html" title="OpenHAB::Core::Types::PointType (class)">PointType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/QuantityType.html" title="OpenHAB::Core::Types::QuantityType (class)">QuantityType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/RawType.html" title="OpenHAB::Core::Types::RawType (class)">RawType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/RefreshType.html" title="OpenHAB::Core::Types::RefreshType (class)">RefreshType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/RewindFastforwardType.html" title="OpenHAB::Core::Types::RewindFastforwardType (class)">RewindFastforwardType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/State.html" title="OpenHAB::Core::Types::State (module)">State</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/StopMoveType.html" title="OpenHAB::Core::Types::StopMoveType (class)">StopMoveType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/StringListType.html" title="OpenHAB::Core::Types::StringListType (class)">StringListType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/StringType.html" title="OpenHAB::Core::Types::StringType (class)">StringType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/TimeSeries.html" title="OpenHAB::Core::Types::TimeSeries (class)">TimeSeries</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/Type.html" title="OpenHAB::Core::Types::Type (module)">Type</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/UnDefType.html" title="OpenHAB::Core::Types::UnDefType (class)">UnDefType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/Core/Types/UpDownType.html" title="OpenHAB::Core::Types::UpDownType (class)">UpDownType</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/Core/ValueCache.html" title="OpenHAB::Core::ValueCache (module)">ValueCache</a></span>
      
      
    </span>
    
    
  </li>

  
  
  

        
      </ul>
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-1" href="OpenHAB/CoreExt.html" title="OpenHAB::CoreExt (module)">CoreExt</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/CoreExt/Between.html" title="OpenHAB::CoreExt::Between (module)">Between</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/CoreExt/Ephemeris.html" title="OpenHAB::CoreExt::Ephemeris (module)">Ephemeris</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/CoreExt/Java.html" title="OpenHAB::CoreExt::Java (module)">Java</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/CoreExt/Java/Class.html" title="OpenHAB::CoreExt::Java::Class (class)">Class</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/CoreExt/Java/Duration.html" title="OpenHAB::CoreExt::Java::Duration (class)">Duration</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/CoreExt/Java/Instant.html" title="OpenHAB::CoreExt::Java::Instant (class)">Instant</a></span>
      
        &lt; java.lang.Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/CoreExt/Java/LocalDate.html" title="OpenHAB::CoreExt::Java::LocalDate (class)">LocalDate</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/CoreExt/Java/LocalTime.html" title="OpenHAB::CoreExt::Java::LocalTime (class)">LocalTime</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/CoreExt/Java/Month.html" title="OpenHAB::CoreExt::Java::Month (class)">Month</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/CoreExt/Java/MonthDay.html" title="OpenHAB::CoreExt::Java::MonthDay (class)">MonthDay</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/CoreExt/Java/Period.html" title="OpenHAB::CoreExt::Java::Period (class)">Period</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/CoreExt/Java/TemporalAmount.html" title="OpenHAB::CoreExt::Java::TemporalAmount (module)">TemporalAmount</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/CoreExt/Java/Time.html" title="OpenHAB::CoreExt::Java::Time (module)">Time</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/CoreExt/Java/ZonedDateTime.html" title="OpenHAB::CoreExt::Java::ZonedDateTime (class)">ZonedDateTime</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/CoreExt/Ruby.html" title="OpenHAB::CoreExt::Ruby (module)">Ruby</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/CoreExt/Ruby/Numeric.html" title="OpenHAB::CoreExt::Ruby::Numeric (module)">Numeric</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/CoreExt/Ruby/QuantityTypeConversion.html" title="OpenHAB::CoreExt::Ruby::QuantityTypeConversion (module)">QuantityTypeConversion</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/CoreExt/Ruby/Range.html" title="OpenHAB::CoreExt::Ruby::Range (module)">Range</a></span>
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-1" href="OpenHAB/DSL.html" title="OpenHAB::DSL (module)">DSL</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/DSL/ConfigDescription.html" title="OpenHAB::DSL::ConfigDescription (module)">ConfigDescription</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/ConfigDescription/Builder.html" title="OpenHAB::DSL::ConfigDescription::Builder (class)">Builder</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/DSL/Debouncer.html" title="OpenHAB::DSL::Debouncer (class)">Debouncer</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/DSL/Events.html" title="OpenHAB::DSL::Events (module)">Events</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Events/WatchEvent.html" title="OpenHAB::DSL::Events::WatchEvent (class)">WatchEvent</a></span>
      
        &lt; Struct
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/DSL/Items.html" title="OpenHAB::DSL::Items (module)">Items</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Items/Builder.html" title="OpenHAB::DSL::Items::Builder (module)">Builder</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Items/Ensure.html" title="OpenHAB::DSL::Items::Ensure (module)">Ensure</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-4" href="OpenHAB/DSL/Items/Ensure/Ensurable.html" title="OpenHAB::DSL::Items::Ensure::Ensurable (module)">Ensurable</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-4" href="OpenHAB/DSL/Items/Ensure/Item.html" title="OpenHAB::DSL::Items::Ensure::Item (module)">Item</a></span>
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Items/GroupItemBuilder.html" title="OpenHAB::DSL::Items::GroupItemBuilder (class)">GroupItemBuilder</a></span>
      
        &lt; ItemBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Items/ItemBuilder.html" title="OpenHAB::DSL::Items::ItemBuilder (class)">ItemBuilder</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Items/TimedCommand.html" title="OpenHAB::DSL::Items::TimedCommand (module)">TimedCommand</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-4" href="OpenHAB/DSL/Items/TimedCommand/TimedCommandDetails.html" title="OpenHAB::DSL::Items::TimedCommand::TimedCommandDetails (class)">TimedCommandDetails</a></span>
      
        &lt; Struct
      
      
    </span>
    
    
  </li>

  

        
      </ul>
    
  </li>


        
      </ul>
    
  </li>

  
  
  
  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/DSL/Rules.html" title="OpenHAB::DSL::Rules (module)">Rules</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Rules/Builder.html" title="OpenHAB::DSL::Rules::Builder (class)">Builder</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Rules/BuilderDSL.html" title="OpenHAB::DSL::Rules::BuilderDSL (class)">BuilderDSL</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Rules/Terse.html" title="OpenHAB::DSL::Rules::Terse (module)">Terse</a></span>
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/DSL/Sitemaps.html" title="OpenHAB::DSL::Sitemaps (module)">Sitemaps</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/Builder.html" title="OpenHAB::DSL::Sitemaps::Builder (class)">Builder</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/ButtongridBuilder.html" title="OpenHAB::DSL::Sitemaps::ButtongridBuilder (class)">ButtongridBuilder</a></span>
      
        &lt; WidgetBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/ChartBuilder.html" title="OpenHAB::DSL::Sitemaps::ChartBuilder (class)">ChartBuilder</a></span>
      
        &lt; WidgetBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/ColorpickerBuilder.html" title="OpenHAB::DSL::Sitemaps::ColorpickerBuilder (class)">ColorpickerBuilder</a></span>
      
        &lt; WidgetBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/DefaultBuilder.html" title="OpenHAB::DSL::Sitemaps::DefaultBuilder (class)">DefaultBuilder</a></span>
      
        &lt; WidgetBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/FrameBuilder.html" title="OpenHAB::DSL::Sitemaps::FrameBuilder (class)">FrameBuilder</a></span>
      
        &lt; LinkableWidgetBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/GroupBuilder.html" title="OpenHAB::DSL::Sitemaps::GroupBuilder (class)">GroupBuilder</a></span>
      
        &lt; LinkableWidgetBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/ImageBuilder.html" title="OpenHAB::DSL::Sitemaps::ImageBuilder (class)">ImageBuilder</a></span>
      
        &lt; LinkableWidgetBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/InputBuilder.html" title="OpenHAB::DSL::Sitemaps::InputBuilder (class)">InputBuilder</a></span>
      
        &lt; WidgetBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/LinkableWidgetBuilder.html" title="OpenHAB::DSL::Sitemaps::LinkableWidgetBuilder (class)">LinkableWidgetBuilder</a></span>
      
        &lt; WidgetBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/MapviewBuilder.html" title="OpenHAB::DSL::Sitemaps::MapviewBuilder (class)">MapviewBuilder</a></span>
      
        &lt; DefaultBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/SelectionBuilder.html" title="OpenHAB::DSL::Sitemaps::SelectionBuilder (class)">SelectionBuilder</a></span>
      
        &lt; SwitchBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/SetpointBuilder.html" title="OpenHAB::DSL::Sitemaps::SetpointBuilder (class)">SetpointBuilder</a></span>
      
        &lt; WidgetBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/SitemapBuilder.html" title="OpenHAB::DSL::Sitemaps::SitemapBuilder (class)">SitemapBuilder</a></span>
      
        &lt; LinkableWidgetBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/SliderBuilder.html" title="OpenHAB::DSL::Sitemaps::SliderBuilder (class)">SliderBuilder</a></span>
      
        &lt; SetpointBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/SwitchBuilder.html" title="OpenHAB::DSL::Sitemaps::SwitchBuilder (class)">SwitchBuilder</a></span>
      
        &lt; WidgetBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/TextBuilder.html" title="OpenHAB::DSL::Sitemaps::TextBuilder (class)">TextBuilder</a></span>
      
        &lt; LinkableWidgetBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/VideoBuilder.html" title="OpenHAB::DSL::Sitemaps::VideoBuilder (class)">VideoBuilder</a></span>
      
        &lt; WidgetBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/WebviewBuilder.html" title="OpenHAB::DSL::Sitemaps::WebviewBuilder (class)">WebviewBuilder</a></span>
      
        &lt; DefaultBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Sitemaps/WidgetBuilder.html" title="OpenHAB::DSL::Sitemaps::WidgetBuilder (class)">WidgetBuilder</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/DSL/Things.html" title="OpenHAB::DSL::Things (module)">Things</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Things/BridgeBuilder.html" title="OpenHAB::DSL::Things::BridgeBuilder (class)">BridgeBuilder</a></span>
      
        &lt; ThingBuilder
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Things/Builder.html" title="OpenHAB::DSL::Things::Builder (class)">Builder</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Things/ChannelBuilder.html" title="OpenHAB::DSL::Things::ChannelBuilder (class)">ChannelBuilder</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/DSL/Things/ThingBuilder.html" title="OpenHAB::DSL::Things::ThingBuilder (class)">ThingBuilder</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/DSL/TimerManager.html" title="OpenHAB::DSL::TimerManager (class)">TimerManager</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-1" href="OpenHAB/Log.html" title="OpenHAB::Log (module)">Log</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-1" href="OpenHAB/Logger.html" title="OpenHAB::Logger (class)">Logger</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-1" href="OpenHAB/OSGi.html" title="OpenHAB::OSGi (module)">OSGi</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-1" href="OpenHAB/RSpec.html" title="OpenHAB::RSpec (module)">RSpec</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/RSpec/Configuration.html" title="OpenHAB::RSpec::Configuration (module)">Configuration</a></span>
      
      
    </span>
    
    
  </li>

  
  <li class="collapsed">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/RSpec/ExampleGroup.html" title="OpenHAB::RSpec::ExampleGroup (module)">ExampleGroup</a></span>
      
      
        <a class="arrow toggle right"></a>
      
    </span>
    
    
      
      <ul>
        
        
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-3" href="OpenHAB/RSpec/ExampleGroup/ClassMethods.html" title="OpenHAB::RSpec::ExampleGroup::ClassMethods (module)">ClassMethods</a></span>
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-2" href="OpenHAB/RSpec/Helpers.html" title="OpenHAB::RSpec::Helpers (module)">Helpers</a></span>
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-1" href="OpenHAB/Transform.html" title="OpenHAB::Transform (module)">Transform</a></span>
      
      
    </span>
    
    
  </li>


        
      </ul>
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-0" href="Array.html" title="Array (class)">Array</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  
  
  
  
  
  
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-0" href="Date.html" title="Date (class)">Date</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-0" href="DateTime.html" title="DateTime (class)">DateTime</a></span>
      
        &lt; Date
      
      
    </span>
    
    
  </li>

  
  
  
  
  
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-0" href="Enumerable.html" title="Enumerable (module)">Enumerable</a></span>
      
      
    </span>
    
    
  </li>

  
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-0" href="Float.html" title="Float (class)">Float</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  
  
  
  
  
  
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-0" href="Integer.html" title="Integer (class)">Integer</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  
  
  
  
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-0" href="Module.html" title="Module (class)">Module</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  
  
  
  
  
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-0" href="Numeric.html" title="Numeric (class)">Numeric</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-0" href="Range.html" title="Range (class)">Range</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-0" href="Symbol.html" title="Symbol (class)">Symbol</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  <li class="">
    <span class="sidebar-link">
      <span class='object_link'><a class="sidebar-link sidebar-link-depth-0" href="Time.html" title="Time (class)">Time</a></span>
      
        &lt; Object
      
      
    </span>
    
    
  </li>

  
  
  
  
  
  
  
  
  
  
  
  
  

              </ul>
            </section>
          </li>
        </ul>
      </aside>

      <main class="page">
        <div class="content"><div id='filecontents'><!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h1 id="jruby-scripting"><a href="#jruby-scripting" class="header-anchor">#</a>JRuby Scripting <!-- raw HTML omitted --></h1>
<p>This add-on provides <a href="https://www.jruby.org/">JRuby</a> scripting language for automation rules.
Also included is <a href="https://openhab.github.io/openhab-jruby/">openhab-scripting</a>, a fairly high-level Ruby gem to support automation in openHAB.
It provides native Ruby access to common openHAB functionality within rules including items, things, actions, logging and more.
If you're new to Ruby, you may want to check out <a href="file.ruby-basics.html">Ruby Basics</a>.</p>
<ul>
<li><a href="#why-ruby">Why Ruby?</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#usage">Usage</a>
<ul>
<li><a href="#ui-based-scripts">UI Based Scripts</a></li>
<li><a href="#file-based-scripts">File Based Scripts</a></li>
<li><a href="#event-object">Event Object</a></li>
</ul>
</li>
<li><a href="#library-details">Library Details</a>
<ul>
<li><a href="#items">Items</a>
<ul>
<li><a href="#groups">Groups</a></li>
<li><a href="#commands">Commands</a></li>
<li><a href="#updates">Updates</a></li>
<li><a href="#state">State</a></li>
<li><a href="#metadata">Metadata</a></li>
<li><a href="#persistence">Persistence</a></li>
<li><a href="#semantic-model">Semantic Model</a></li>
<li><a href="#linked-things">Linked Things</a></li>
<li><a href="#item-builder">Item Builder</a></li>
</ul>
</li>
<li><a href="#things">Things</a></li>
<li><a href="#actions">Actions</a></li>
<li><a href="#logging">Logging</a></li>
<li><a href="#timers">Timers</a></li>
<li><a href="#cache">Cache</a></li>
<li><a href="#time">Time</a></li>
<li><a href="#ephemeris">Ephemeris</a></li>
<li><a href="#rules-scripts-and-scenes">Rules, Scripts, and Scenes</a></li>
<li><a href="#gems">Gems</a></li>
<li><a href="#shared-code">Shared Code</a></li>
<li><a href="#transformations">Transformations</a></li>
<li><a href="#profile">Profile</a></li>
<li><a href="#sitemaps">Sitemaps</a></li>
</ul>
</li>
<li><a href="#file-based-rules">File Based Rules</a>
<ul>
<li><a href="#basic-rule-structure">Basic Rule Structure</a></li>
<li><a href="#rule-triggers">Rule Triggers</a>
<ul>
<li><a href="#item-or-thing-changed">Item or Thing Changed</a></li>
<li><a href="#item-updated">Item Updated</a></li>
<li><a href="#item-received-a-command">Item Received a Command</a></li>
<li><a href="#member-of-group-trigger">Member-of-Group Trigger</a></li>
<li><a href="#script-is-loaded">Script is Loaded</a></li>
<li><a href="#openhab-system-started">openHAB System Started</a></li>
<li><a href="#cron-trigger">Cron Trigger</a></li>
<li><a href="#datetimeitem-trigger">DateTimeItem Trigger</a></li>
<li><a href="#other-triggers">Other Triggers</a></li>
<li><a href="#combining-multiple-triggers">Combining Multiple Triggers</a></li>
<li><a href="#combining-multiple-conditions">Combining Multiple Conditions</a></li>
</ul>
</li>
<li><a href="#rule-conditions">Rule Conditions</a></li>
<li><a href="#rule-executions">Rule Executions</a>
<ul>
<li><a href="#run-execution-block">Run Execution Block</a></li>
<li><a href="#triggered-execution-block">Triggered Execution Block</a></li>
<li><a href="#delay-execution-block">Delay Execution Block</a></li>
</ul>
</li>
<li><a href="#terse-rules">Terse Rules</a></li>
<li><a href="#early-exit-from-a-rule">Early Exit From a Rule</a></li>
<li><a href="#dynamic-generation-of-rules">Dynamic Generation of Rules</a></li>
<li><a href="#scenes-and-scripts">Scenes and Scripts</a></li>
<li><a href="#hooks">Hooks</a></li>
</ul>
</li>
<li><a href="#calling-java-from-jruby">Calling Java From JRuby</a></li>
<li><a href="#full-documentation">Full Documentation</a></li>
</ul>
<p>Additional <a href="file.examples.html">example rules are available</a>, as well as examples of <a href="file.conversions.html">conversions from DSL and Python rules</a>.</p>
<h2 id="why-ruby"><a href="#why-ruby" class="header-anchor">#</a>Why Ruby?</h2>
<ul>
<li>Ruby is designed for programmers' productivity with the idea that programming should be fun for programmers.</li>
<li>Ruby emphasizes the necessity for software to be understood by humans first and computers second.</li>
<li>Ruby makes writing automation enjoyable without having to fight with compilers and interpreters.</li>
<li>Rich ecosystem of tools, including things like Rubocop to help developers write clean code and RSpec to test the libraries.</li>
<li>Ruby is really good at letting one express intent and create a DSL to make that expression easier.</li>
</ul>
<h3 id="design-points"><a href="#design-points" class="header-anchor">#</a>Design points <!-- raw HTML omitted --></h3>
<ul>
<li>Create an intuitive method of defining rules and automation
<ul>
<li>Rule language should "flow" in a way that you can read the rules out loud</li>
</ul>
</li>
<li>Abstract away complexities of openHAB</li>
<li>Enable all the power of Ruby and openHAB</li>
<li>Create a Frictionless experience for building automation</li>
<li>The common, yet tricky tasks are abstracted and made easy, e.g. creating a timer that automatically reschedules itself.</li>
<li>Tested
<ul>
<li>Designed and tested using <a href="https://en.wikipedia.org/wiki/Test-driven_development">Test-Driven Development</a> with <a href="https://rspec.info/">RSpec</a></li>
</ul>
</li>
<li>Extensible.
<ul>
<li>Anyone should be able to customize and add/remove core language features</li>
</ul>
</li>
<li>Easy access to the Ruby ecosystem in rules through Ruby gems.</li>
</ul>
<h2 id="installation"><a href="#installation" class="header-anchor">#</a>Installation</h2>
<h3 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a>Prerequisites <!-- raw HTML omitted --></h3>
<ol>
<li>openHAB 3.4+</li>
<li>The JRuby Scripting Language Addon</li>
</ol>
<h3 id="from-the-user-interface"><a href="#from-the-user-interface" class="header-anchor">#</a>From the User Interface <!-- raw HTML omitted --></h3>
<ol>
<li>Go to <code>Settings -&gt; Add-ons -&gt; Automation</code> and install the jrubyscripting automation addon following the <a href="https://www.openhab.org/docs/configuration/addons.html">openHAB instructions</a>.
In openHAB 4.0+ the defaults are set so the next step can be skipped.</li>
<li>Go to <code>Settings -&gt; Add-on Settings -&gt; JRuby Scripting</code>:
<ul>
<li><strong>Ruby Gems</strong>: <code>openhab-scripting=~&gt;5.0</code></li>
<li><strong>Require Scripts</strong>: <code>openhab/dsl</code> (not required, but recommended)</li>
</ul>
</li>
</ol>
<h3 id="using-files"><a href="#using-files" class="header-anchor">#</a>Using Files <!-- raw HTML omitted --></h3>
<ol>
<li>
<p>Edit <code>&lt;OPENHAB_CONF&gt;/services/addons.cfg</code> and ensure that <code>jrubyscripting</code> is included in an uncommented <code>automation=</code> list of automations to install.
In openHAB 4.0+ the defaults are set so the next step can be skipped.</p>
</li>
<li>
<p>Configure JRuby openHAB services</p>
<p>Create a file called <code>jruby.cfg</code> in <code>&lt;OPENHAB_CONF&gt;/services/</code> with the following content:</p>
<pre class="code ini"><code class="ini">org.openhab.automation.jrubyscripting:gems=openhab-scripting=~&gt;5.0
org.openhab.automation.jrubyscripting:require=openhab/dsl
</code></pre>
</li>
</ol>
<h2 id="configuration"><a href="#configuration" class="header-anchor">#</a>Configuration</h2>
<p>After installing this add-on, you will find configuration options in the openHAB portal under <em>Settings -&gt; Add-on Settings -&gt; JRuby Scripting</em>.
Alternatively, JRuby configuration parameters may be set by creating a <code>jruby.cfg</code> file in <code>conf/services/</code>.</p>
<p>By default this add-on includes the <a href="https://github.com/openhab/openhab-jruby">openhab-scripting</a> Ruby gem and automatically <code>require</code>s it.
This allows the use of <span class='object_link'><a href="OpenHAB/DSL.html#items-class_method" title="OpenHAB::DSL.items (method)">items</a></span>, <span class='object_link'><a href="OpenHAB/DSL.html#rules-class_method" title="OpenHAB::DSL.rules (method)">rules</a></span>, <span class='object_link'><a href="OpenHAB/DSL.html#shared_cache-class_method" title="OpenHAB::DSL.shared_cache (method)">shared_cache</a></span> and other objects in your scripts.
This functionality can be disabled for users who prefer to manage their own gems and <code>require</code>s via the add-on configuration options.
Simply change the <code>gems</code> and <code>require</code> configuration settings.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gem_home</code></td>
<td>The path to store Ruby Gems. <!-- raw HTML omitted --><!-- raw HTML omitted -->Default: <code>$OPENHAB_CONF/automation/ruby/.gem/{RUBY_ENGINE_VERSION}</code></td>
</tr>
<tr>
<td><code>gems</code></td>
<td>A list of gems to install. <!-- raw HTML omitted --><!-- raw HTML omitted -->Default: <code>openhab-scripting=~&gt;5.0</code></td>
</tr>
<tr>
<td><code>check_update</code></td>
<td>Check for updated version of <code>gems</code> on start up or settings change. <!-- raw HTML omitted --><!-- raw HTML omitted -->Default: <code>true</code></td>
</tr>
<tr>
<td><code>require</code></td>
<td>List of scripts to be required automatically. <!-- raw HTML omitted --><!-- raw HTML omitted -->Default: <code>openhab/dsl</code></td>
</tr>
<tr>
<td><code>rubylib</code></td>
<td>Search path for user libraries. <!-- raw HTML omitted --><!-- raw HTML omitted -->Default: <code>$OPENHAB_CONF/automation/ruby/lib</code></td>
</tr>
<tr>
<td><code>dependency_tracking</code></td>
<td>Enable dependency tracking. <!-- raw HTML omitted --><!-- raw HTML omitted -->Default: <code>true</code></td>
</tr>
<tr>
<td><code>local_context</code></td>
<td>See notes below. <!-- raw HTML omitted --><!-- raw HTML omitted -->Default: <code>singlethread</code></td>
</tr>
<tr>
<td><code>local_variables</code></td>
<td>See notes below. <!-- raw HTML omitted --><!-- raw HTML omitted -->Default: <code>transient</code></td>
</tr>
</tbody>
</table>
<p>When using file-based configuration, these parameters must be prefixed with <code>org.openhab.automation.jrubyscripting:</code>, for example:</p>
<pre class="code ini"><code class="ini">org.openhab.automation.jrubyscripting:gems=openhab-scripting=~&gt;5.0
org.openhab.automation.jrubyscripting:require=openhab/dsl
</code></pre>
<h3 id="gem_home"><a href="#gem_home" class="header-anchor">#</a>gem_home <!-- raw HTML omitted --></h3>
<p>Path to where Ruby Gems will be installed to and loaded from.
The directory will be created if necessary.
You can use <code>{RUBY_ENGINE_VERSION}</code>, <code>{RUBY_ENGINE}</code> and/or <code>{RUBY_VERSION}</code> replacements in this value to automatically point to a new directory when the addon is updated with a new version of JRuby.</p>
<h3 id="gems"><a href="#gems" class="header-anchor">#</a>gems <!-- raw HTML omitted --></h3>
<p>A comma separated list of <a href="https://rubygems.org/">Ruby Gems</a> to install.</p>
<p>The default installs the version of the helper for this version of openHAB.
When overriding the default, be sure to still include the <code>openhab-scripting</code> gem in the list of gems to install.</p>
<p>Each gem can have version specifiers which uses <a href="https://thoughtbot.com/blog/rubys-pessimistic-operator">pessimistic versioning</a>.
Multiple version specifiers can be added by separating them with a semicolon.</p>
<p>Examples:</p>
<table>
<thead>
<tr>
<th>gem setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>openhab-scripting</code></td>
<td>install the latest version of <code>openhab-scripting</code> gem</td>
</tr>
<tr>
<td><code>openhab-scripting=~&gt;5.0.0</code></td>
<td>install the latest version 5.0.x but not 5.1.x</td>
</tr>
<tr>
<td><code>openhab-scripting=~&gt;5.0</code></td>
<td>install the latest version 5.x but not 6.x</td>
</tr>
<tr>
<td><code>openhab-scripting=~&gt;5.0, faraday=~&gt;2.7;&gt;=2.7.4</code></td>
<td>install <code>openhab-scripting</code> gem version 5.x and <code>faraday</code> gem version 2.7.4 or higher, but less than 3.0</td>
</tr>
<tr>
<td><code>gem1= &gt;= 2.2.1; &lt;= 2.2.5</code></td>
<td>install <code>gem1</code> gem version 2.2.1 or above, but less than or equal to version 2.2.5</td>
</tr>
</tbody>
</table>
<h3 id="check_update"><a href="#check_update" class="header-anchor">#</a>check_update <!-- raw HTML omitted --></h3>
<p>Check RubyGems for updates to the above gems when openHAB starts or JRuby settings are changed.
Otherwise it will try to fulfil the requirements with locally installed gems, and you can manage them yourself with an external Ruby by setting the same GEM_HOME.</p>
<h3 id="require"><a href="#require" class="header-anchor">#</a>require <!-- raw HTML omitted --></h3>
<p>A comma separated list of script names to be required by the JRuby Scripting Engine at the beginning of user scripts.
The default is to require the helper library.</p>
<h3 id="rubylib"><a href="#rubylib" class="header-anchor">#</a>rubylib <!-- raw HTML omitted --></h3>
<p>Search path for user libraries.
Separate each path with a colon (semicolon in Windows).</p>
<h3 id="dependency_tracking"><a href="#dependency_tracking" class="header-anchor">#</a>dependency_tracking <!-- raw HTML omitted --></h3>
<p>Dependency tracking allows your scripts to automatically reload when one of its dependencies is updated.
You may want to disable dependency tracking if you plan on editing or updating a shared library, but don't want all your scripts to reload until you can test it.</p>
<h3 id="local_context"><a href="#local_context" class="header-anchor">#</a>local_context <!-- raw HTML omitted --></h3>
<p>The local context holds Ruby runtime, name-value pairs for sharing variables between Java and Ruby.
Valid values are: <code>singleton</code>, <code>threadsafe</code>, <code>singlethread</code>, or <code>concurrent</code>.
See <a href="https://github.com/jruby/jruby/wiki/RedBridge#context-instance-type">this</a> for options and details.</p>
<h3 id="local_variables"><a href="#local_variables" class="header-anchor">#</a>local_variables <!-- raw HTML omitted --></h3>
<p>Defines how variables are shared between Ruby and Java.
Valid values are: <code>transient</code>, <code>persistent</code>, or <code>global</code>.
See the <a href="https://github.com/jruby/jruby/wiki/RedBridge#local-variable-behavior-options">JRuby documentation</a> for options and details.</p>
<h2 id="usage"><a href="#usage" class="header-anchor">#</a>Usage</h2>
<h3 id="ui-based-scripts"><a href="#ui-based-scripts" class="header-anchor">#</a>UI Based Scripts</h3>
<p>The quickest way to add rules is through the openHAB Web UI.</p>
<p>Advanced users, or users migrating scripts from existing systems may want to use <a href="#file-based-scripts">File Based Scripts</a> for managing rules using files in the user configuration directory.</p>
<h4 id="adding-triggers"><a href="#adding-triggers" class="header-anchor">#</a>Adding Triggers <!-- raw HTML omitted --></h4>
<p>Using the openHAB UI, first create a new rule and set a trigger condition.</p>
<p><img src="docs/images/rule-config.png" alt="openHAB Rule Configuration"></p>
<h4 id="adding-actions"><a href="#adding-actions" class="header-anchor">#</a>Adding Actions <!-- raw HTML omitted --></h4>
<p>Select "Add Action" and then select "Run Script" with "Ruby".
This will bring up an empty script editor where you can enter your JavaScript.</p>
<p><img src="docs/images/rule-engines.png" alt="openHAB Rule Engines"></p>
<p>You can now write rules using standard Ruby along with the included openHAB <a href="#library-details">library</a>.</p>
<p><img src="docs/images/rule-script.png" alt="openHAB Rule Script"></p>
<p>For example, turning a light on:</p>
<pre class="code ruby"><code class="ruby"><span class="constant">KitchenLight</span>.on
logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Kitchen Light State: </span><span class="inline"><span class="inline-delimiter">#{</span><span class="constant">KitchenLight</span>.state<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)
</code></pre>
<p>Sending a notification:</p>
<pre class="code ruby"><code class="ruby"><span class="constant">Notification</span>.send(<span class="string"><span class="delimiter">&quot;</span><span class="content">romeo@montague.org</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Balcony door is open</span><span class="delimiter">&quot;</span></span>)
</code></pre>
<p>Querying the status of a thing:</p>
<pre class="code ruby"><code class="ruby">logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Thing status: </span><span class="inline"><span class="inline-delimiter">#{</span>things[<span class="string"><span class="delimiter">&quot;</span><span class="content">zwave:serial_zstick:512</span><span class="delimiter">&quot;</span></span>].status<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)<span class="string"><span class="delimiter">&quot;</span><span class="content">
</span></span></code></pre>
<p>Theoretically you could even use a system start trigger with a UI rule, and then use the <a href="#file-based-rules">syntax</a> mostly developed for file based rules to create multiple rules.</p>
<h3 id="file-based-scripts"><a href="#file-based-scripts" class="header-anchor">#</a>File Based Scripts</h3>
<p>The JRuby Scripting addon will load scripts from <code>automation/ruby</code> in the user configuration directory.
The system will automatically reload scripts when changes are detected to files.
Local variable state is not persisted among reloads, see using the <a href="#cache">cache</a> for a convenient way to persist objects.
See <a href="#file-based-rules">File Based Rules</a> for examples of creating rules within your scripts.</p>
<h3 id="event-object"><a href="#event-object" class="header-anchor">#</a>Event Object</h3>
<p>When you use "Item event" as trigger (i.e. "[item] received a command", "[item] was updated", "[item] changed"), there is additional context available for the action in a variable called <code>event</code>.</p>
<p>This tables gives an overview of the <code>event</code> object for most common trigger types.
For full details, explore <span class='object_link'><a href="OpenHAB/Core/Events.html" title="OpenHAB::Core::Events (module)">OpenHAB::Core::Events</a></span>.</p>
<table>
<thead>
<tr>
<th>Property Name</th>
<th>Type</th>
<th>Trigger Types</th>
<th>Description</th>
<th>Rules DSL Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>state</code></td>
<td><span class='object_link'><a href="OpenHAB/Core/Types/State.html" title="OpenHAB::Core::Types::State (module)">State</a></span> or <code>nil</code></td>
<td><code>[item] changed</code>, <code>[item] was updated</code></td>
<td>State that triggered event</td>
<td><code>triggeringItem.state</code></td>
</tr>
<tr>
<td><code>was</code></td>
<td><span class='object_link'><a href="OpenHAB/Core/Types/State.html" title="OpenHAB::Core::Types::State (module)">State</a></span> or <code>nil</code></td>
<td><code>[item] changed</code></td>
<td>Previous state of Item or Group that triggered event</td>
<td><code>previousState</code></td>
</tr>
<tr>
<td><code>command</code></td>
<td><span class='object_link'><a href="OpenHAB/Core/Types/Command.html" title="OpenHAB::Core::Types::Command (module)">Command</a></span></td>
<td><code>[item] received a command</code></td>
<td>Command that triggered event</td>
<td><code>receivedCommand</code></td>
</tr>
<tr>
<td><code>item</code></td>
<td><span class='object_link'><a href="OpenHAB/Core/Items/Item.html" title="OpenHAB::Core::Items::Item (module)">Item</a></span></td>
<td>All item related triggers</td>
<td>Item that triggered event</td>
<td><code>triggeringItem</code></td>
</tr>
<tr>
<td><code>group</code></td>
<td><span class='object_link'><a href="OpenHAB/Core/Items/Item.html" title="OpenHAB::Core::Items::Item (module)">GroupItem</a></span></td>
<td><code>Member of [group] changed</code>, <code>Member of [group] was updated</code>, <code>Member of [group] received a command</code></td>
<td>Group whose member triggered the event</td>
<td><code>triggeringGroup</code></td>
</tr>
</tbody>
</table>
<pre class="code ruby"><code class="ruby">logger.info(event.state == <span class="constant">ON</span>)
</code></pre>
<pre class="code ruby"><code class="ruby">event.item
</code></pre>
<p>Get the Triggering Item's Name:</p>
<pre class="code ruby"><code class="ruby">event.item.name
</code></pre>
<p>Get the Triggering Item's Label:</p>
<pre class="code ruby"><code class="ruby">event.item.label
</code></pre>
<p>Get the Triggering Item's State:</p>
<pre class="code ruby"><code class="ruby">event.state <span class="comment"># this version retrieves the item's state when the event was generated</span>
</code></pre>
<p>or</p>
<pre class="code ruby"><code class="ruby">event.item.state <span class="comment"># this version will re-query the item for its state</span>
</code></pre>
<pre class="code ruby"><code class="ruby"><span class="keyword">if</span> event.item.state == <span class="constant">ON</span>
  <span class="comment"># do something</span>
<span class="keyword">end</span>
<span class="comment"># or (preferable)</span>
<span class="keyword">if</span> event.item.on?
  <span class="comment"># do something</span>
<span class="keyword">end</span>
</code></pre>
<p>Get the Triggering Item's Previous State:</p>
<pre class="code ruby"><code class="ruby">event.was
</code></pre>
<pre class="code ruby"><code class="ruby"><span class="keyword">if</span> event.was.on?
  <span class="comment"># do something</span>
<span class="keyword">end</span>
</code></pre>
<p>Compare Triggering Item's State Against Previous State:</p>
<pre class="code ruby"><code class="ruby">event.state &gt; event.was
</code></pre>
<p>Get the Received Command:</p>
<pre class="code ruby"><code class="ruby">event.command
</code></pre>
<pre class="code ruby"><code class="ruby"><span class="keyword">if</span> event.command.on?
  <span class="comment"># do something</span>
<span class="keyword">end</span>
</code></pre>
<h2 id="library-details"><a href="#library-details" class="header-anchor">#</a>Library Details</h2>
<p>The openHAB JRuby Scripting runtime attempts to provide a familiar environment to Ruby developers.</p>
<h3 id="items"><a href="#items" class="header-anchor">#</a>Items</h3>
<p>The <span class='object_link'><a href="OpenHAB/DSL.html#items-class_method" title="OpenHAB::DSL.items (method)">items</a></span> object allows interactions with openHAB items.
However, most items can be referred to directly by name:</p>
<pre class="code ruby"><code class="ruby"><span class="constant">My_Item</span>
gWindowBlinds
</code></pre>
<p>Items can be retrieved dynamically:</p>
<pre class="code ruby"><code class="ruby">the_item = items[<span class="string"><span class="delimiter">'</span><span class="content">My_Item</span><span class="delimiter">'</span></span>] <span class="comment"># This returns an Item object, not just its state</span>
<span class="comment"># For all intents and purposes, the_item variable is the same as My_Item in the previous example</span>
</code></pre>
<p>Get the Item's Name as a String:</p>
<pre class="code ruby"><code class="ruby"><span class="constant">My_Item</span>.name
</code></pre>
<p>Get the Item's Label:</p>
<pre class="code ruby"><code class="ruby"><span class="constant">My_Item</span>.label
</code></pre>
<p>Get a Related Item:</p>
<pre class="code ruby"><code class="ruby">my_light_item = items[<span class="constant">My_Switch</span>.name.sub(<span class="string"><span class="delimiter">'</span><span class="content">_Switch</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">_Light</span><span class="delimiter">'</span></span>)]
</code></pre>
<h4 id="groups"><a href="#groups" class="header-anchor">#</a>Groups</h4>
<p>Groups are regular items, but can also contain other items.</p>
<pre class="code ruby"><code class="ruby"><span class="comment"># direct members</span>
gTest.members

<span class="comment"># direct members and all their descendents</span>
gTest.all_members
</code></pre>
<p>Group members work like a <a href="https://docs.ruby-lang.org/en/master/Array.html">Ruby array</a>
so you can use <code>&amp;</code> for intersection, <code>|</code> for union, and <code>-</code> for difference.</p>
<pre class="code ruby"><code class="ruby">curtains_in_family_room = gFamilyRoom.members &amp; gCurtains.members
</code></pre>
<p>You can iterate over group members with Ruby's ubiquitous <code>#each</code> method:</p>
<pre class="code ruby"><code class="ruby">gTest.members.each <span class="keyword">do</span> |item|
  <span class="comment"># process item</span>
<span class="keyword">end</span>

<span class="comment"># Iterate over all members, including members of members</span>
gTest.all_members.each <span class="keyword">do</span> |item|
  <span class="comment"># process item</span>
<span class="keyword">end</span>
</code></pre>
<p>Group members are also <a href="https://docs.ruby-lang.org/en/master/Enumerable.html">Enumerable</a>, so can use any of tthose included methods:</p>
<pre class="code ruby"><code class="ruby">members_that_are_on = gTest.members.select(&amp;<span class="symbol">:on?</span>)

<span class="comment"># exclude state</span>
members_that_are_not_on = gTest.members.reject(&amp;<span class="symbol">:on?</span>)

<span class="comment"># Filter with code:</span>
high_temperatures = gTemperatures.members.select(&amp;<span class="symbol">:state?</span>).select { |item| item.state &gt; <span class="integer">30</span> | <span class="string"><span class="delimiter">'</span><span class="content">°C</span><span class="delimiter">'</span></span> }
</code></pre>
<p>See also <a href="https://docs.ruby-lang.org/en/master/Array.html#class-Array-label-Accessing+Elements">Accessing elements in a Ruby array</a>.</p>
<p>Get a sorted list of Group members matching a condition:</p>
<pre class="code ruby"><code class="ruby">sorted_items_by_battery_level = gBattery.members
                                        .select(&amp;<span class="symbol">:state?</span>) <span class="comment"># only include non NULL / UNDEF members</span>
                                        .select { |item| item.state &lt; <span class="integer">20</span> } <span class="comment"># select only those with low battery</span>
                                        .sort_by(&amp;<span class="symbol">:state</span>)
</code></pre>
<p>Get a list of values mapped from the members of a group:</p>
<pre class="code ruby"><code class="ruby">battery_levels = gBattery.select(&amp;<span class="symbol">:state?</span>) <span class="comment"># only include non NULL / UNDEF members</span>
                         .sort_by(&amp;<span class="symbol">:state</span>)
                         .map { |item| <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">#{</span>item.label<span class="inline-delimiter">}</span></span><span class="content">: </span><span class="inline"><span class="inline-delimiter">#{</span>item.state<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span> } <span class="comment"># Use item state default formatting</span>
</code></pre>
<p>Perform arithmetic on values from members of a group:</p>
<pre class="code ruby"><code class="ruby">weekly_rainfall = gRainWeeklyForecast.members.sum(&amp;<span class="symbol">:state</span>)
</code></pre>
<h4 id="commands"><a href="#commands" class="header-anchor">#</a>Commands</h4>
<p>These three variants do the same thing:</p>
<pre class="code ruby"><code class="ruby"><span class="constant">My_Item</span>.on
<span class="constant">My_Item</span>.command <span class="constant">ON</span>
<span class="constant">My_Item</span> &lt;&lt; <span class="constant">ON</span>
</code></pre>
<p>Note: all possible commands are supported on the corresponding item types, e.g. <code>on</code>, <code>off</code>, <code>up</code>, <code>down</code>, <code>play</code>, <code>pause</code>, <code>stop</code>, etc.
For more details, see the individual item classes under <span class='object_link'><a href="OpenHAB/Core/Items.html" title="OpenHAB::Core::Items (module)">OpenHAB::Core::Items</a></span>.</p>
<h5 id="sending-commands-to-an-item-only-when-its-state-is-different"><a href="#sending-commands-to-an-item-only-when-its-state-is-different" class="header-anchor">#</a>Sending Commands to an Item Only When Its State is Different <!-- raw HTML omitted --></h5>
<pre class="code ruby"><code class="ruby"><span class="constant">My_Item</span>.ensure.on
<span class="constant">My_Item</span>.ensure.command <span class="constant">ON</span>
<span class="constant">My_Item</span>.ensure &lt;&lt; <span class="constant">ON</span>

<span class="comment"># ensure causes the command to return nil if the item is already in the same state</span>
logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Turning off the light</span><span class="delimiter">&quot;</span></span>) <span class="keyword">if</span> <span class="constant">My_Item</span>.ensure.off
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL.html#ensure_states-class_method" title="OpenHAB::DSL.ensure_states (method)">ensure_states</a></span>, <span class='object_link'><a href="OpenHAB/DSL.html#ensure_states!-class_method" title="OpenHAB::DSL.ensure_states! (method)">ensure_states!</a></span>,
<span class='object_link'><a href="OpenHAB/DSL/Items/Ensure/Ensurable.html#ensure-instance_method" title="OpenHAB::DSL::Items::Ensure::Ensurable#ensure (method)">ensure</a></span>.</p>
<h5 id="timed-commands"><a href="#timed-commands" class="header-anchor">#</a>Timed Commands <!-- raw HTML omitted --></h5>
<p>A <span class='object_link'><a href="OpenHAB/DSL/Items/TimedCommand.html" title="OpenHAB::DSL::Items::TimedCommand (module)">Timed Command</a></span> is similar to the openHAB Item's <a href="https://www.openhab.org/docs/configuration/items.html#parameter-expire">expire parameter</a> but it offers more flexibility.
It removes the need to manually create a timer.
The command is sent to the item, then after the duration has elapsed, reverted.
It also handles automatically canceling the timer if the item changes states before it reverts.</p>
<pre class="code ruby"><code class="ruby"><span class="constant">My_Switch</span>.on <span class="key">for</span>: <span class="integer">5</span>.minutes
</code></pre>
<h4 id="updates"><a href="#updates" class="header-anchor">#</a>Updates</h4>
<p>Post an update to an item:</p>
<pre class="code ruby"><code class="ruby"><span class="constant">My_Switch</span>.update <span class="constant">ON</span>
</code></pre>
<h4 id="state"><a href="#state" class="header-anchor">#</a>State</h4>
<p>The Item's state is accessible through <span class='object_link'><a href="OpenHAB/Core/Items/GenericItem.html#state-instance_method" title="OpenHAB::Core::Items::GenericItem#state (method)">Item#state</a></span>:</p>
<pre class="code ruby"><code class="ruby"><span class="keyword">if</span> <span class="constant">My_Item</span>.state == <span class="constant">ON</span>
  <span class="comment"># do something</span>
<span class="keyword">end</span>

<span class="comment"># This syntax is equivalent and preferred:</span>
<span class="keyword">if</span> <span class="constant">My_Item</span>.on?
  <span class="comment"># do something</span>
<span class="keyword">end</span>

<span class="keyword">if</span> <span class="constant">Indoor_Temperature</span>.state &gt; <span class="integer">20</span> | <span class="string"><span class="delimiter">'</span><span class="content">°C</span><span class="delimiter">'</span></span> || <span class="constant">Indoor_Temperature</span>.state &gt; <span class="constant">Outdoor_Temperature</span>.state
  <span class="comment"># do something</span>
<span class="keyword">end</span>
</code></pre>
<p>Note: Boolean helper methods are available depending on the item / state type.
For example <code>up?</code>, <code>down?</code>, <code>closed?</code>, <code>open?</code>, etc.</p>
<p>Check if an Item's state is <span class='object_link'><a href="OpenHAB/Core/Types/UnDefType.html#NULL-constant" title="OpenHAB::Core::Types::UnDefType::NULL (constant)">NULL</a></span> of <span class='object_link'><a href="OpenHAB/Core/Types/UnDefType.html#UNDEF-constant" title="OpenHAB::Core::Types::UnDefType::UNDEF (constant)">UNDEF</a></span>:</p>
<pre class="code ruby"><code class="ruby"><span class="keyword">if</span> <span class="constant">My_Item</span>.state?
  logger.info <span class="string"><span class="delimiter">'</span><span class="content">My_Item is not NULL nor UNDEF</span><span class="delimiter">'</span></span>
<span class="keyword">end</span>
</code></pre>
<h5 id="comparing-items-state"><a href="#comparing-items-state" class="header-anchor">#</a>Comparing Item's State <!-- raw HTML omitted --></h5>
<pre class="code ruby"><code class="ruby"><span class="constant">String_Item</span>.state == <span class="string"><span class="delimiter">'</span><span class="content">test string</span><span class="delimiter">'</span></span>
<span class="constant">Number_Item</span>.state &gt; <span class="float">5.3</span>
items[<span class="string"><span class="delimiter">'</span><span class="content">Number_Item</span><span class="delimiter">'</span></span>].state == <span class="integer">10</span>

<span class="comment"># Compare Quantity Types</span>
<span class="constant">Temperature_Item</span>.state &gt; <span class="integer">24</span> | <span class="string"><span class="delimiter">'</span><span class="content">°C</span><span class="delimiter">'</span></span>
<span class="constant">Indoor_Temperature</span>.state &gt; <span class="constant">Outdoor_Temperature</span>.state
<span class="constant">Indoor_Temperature</span>.state &gt; <span class="constant">Outdoor_Temperature</span>.state + <span class="integer">5</span> | <span class="string"><span class="delimiter">'</span><span class="content">°C</span><span class="delimiter">'</span></span>
<span class="constant">Indoor_Temperature</span>.state - <span class="constant">Outdoor_Temperature</span>.state &gt; <span class="integer">5</span> | <span class="string"><span class="delimiter">'</span><span class="content">°C</span><span class="delimiter">'</span></span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL.html#unit-class_method" title="OpenHAB::DSL.unit (method)">unit block</a></span></p>
<h5 id="range-checking"><a href="#range-checking" class="header-anchor">#</a>Range checking <!-- raw HTML omitted --></h5>
<p>Types that are comparable, such as <span class='object_link'><a href="OpenHAB/Core/Types/StringType.html" title="OpenHAB::Core::Types::StringType (class)">StringType</a></span>, <span class='object_link'><a href="OpenHAB/Core/Types/DateTimeType.html" title="OpenHAB::Core::Types::DateTimeType (class)">DateTimeType</a></span>, <span class='object_link'><a href="OpenHAB/Core/Types/DecimalType.html" title="OpenHAB::Core::Types::DecimalType (class)">DecimalType</a></span>, <span class='object_link'><a href="OpenHAB/Core/Types/PercentType.html" title="OpenHAB::Core::Types::PercentType (class)">PercentType</a></span>, include Ruby's <a href="https://docs.ruby-lang.org/en/master/Comparable.html">Comparable</a> module which provides the handy <a href="https://docs.ruby-lang.org/en/master/Comparable.html#method-i-between-3F">between?</a> method.</p>
<pre class="code ruby"><code class="ruby"><span class="constant">String_Item</span>.update(<span class="string"><span class="delimiter">&quot;</span><span class="content">Freddy</span><span class="delimiter">&quot;</span></span>)
<span class="constant">String_Item</span>.state.between?(<span class="string"><span class="delimiter">&quot;</span><span class="content">E</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">G</span><span class="delimiter">&quot;</span></span>) <span class="comment"># =&gt; true</span>

<span class="constant">Number_Item</span>.update(<span class="integer">10</span>)
<span class="keyword">if</span> <span class="constant">Number_Item</span>.state.between?(<span class="integer">5</span>, <span class="integer">20</span>)
  logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Number_Item falls within the expected range</span><span class="delimiter">&quot;</span></span>
<span class="keyword">end</span>

<span class="constant">Temperature_Item</span>.update(<span class="integer">16</span> | <span class="string"><span class="delimiter">&quot;</span><span class="content">°C</span><span class="delimiter">&quot;</span></span>)
<span class="constant">Temperature_Item</span>.state.between?(<span class="integer">20</span> | <span class="string"><span class="delimiter">&quot;</span><span class="content">°C</span><span class="delimiter">&quot;</span></span>, <span class="integer">24</span> | <span class="string"><span class="delimiter">&quot;</span><span class="content">°C</span><span class="delimiter">&quot;</span></span>) <span class="comment"># =&gt; false</span>
</code></pre>
<p>Alternatively, a Ruby <a href="https://docs.ruby-lang.org/en/master/Range.html">range</a> can be used.
This can be handy for excluding the end of the range with the <code>...</code> operator.</p>
<pre class="code ruby"><code class="ruby"><span class="keyword">if</span> (<span class="integer">5</span>..<span class="integer">10</span>).cover?(<span class="constant">Number_Item</span>.state)
  logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Number_Item is in the expected range</span><span class="delimiter">&quot;</span></span>
<span class="keyword">end</span>

((<span class="integer">20</span>|<span class="string"><span class="delimiter">&quot;</span><span class="content">°C</span><span class="delimiter">&quot;</span></span>)..(<span class="integer">24</span>|<span class="string"><span class="delimiter">&quot;</span><span class="content">°C</span><span class="delimiter">&quot;</span></span>)).cover?(<span class="constant">Temperature_Item</span>.state)
</code></pre>
<h5 id="loose-type-comparisons"><a href="#loose-type-comparisons" class="header-anchor">#</a>Loose Type Comparisons <!-- raw HTML omitted --></h5>
<p>Some openHAB item types can accept different command types.
For example, a <span class='object_link'><a href="OpenHAB/Core/Items/DimmerItem.html" title="OpenHAB::Core::Items::DimmerItem (class)">DimmerItem</a></span> can accept a command with an <span class='object_link'><a href="OpenHAB/Core/Types/OnOffType.html" title="OpenHAB::Core::Types::OnOffType (class)">OnOffType</a></span>, <span class='object_link'><a href="OpenHAB/Core/Types/IncreaseDecreaseType.html" title="OpenHAB::Core::Types::IncreaseDecreaseType (class)">IncreaseDecreaseType</a></span> or a <span class='object_link'><a href="OpenHAB/Core/Types/PercentType.html" title="OpenHAB::Core::Types::PercentType (class)">PercentType</a></span>.
However, ultimately an item only stores its state in its native type, e.g. a <span class='object_link'><a href="OpenHAB/Core/Items/DimmerItem.html" title="OpenHAB::Core::Items::DimmerItem (class)">DimmerItems</a></span>'s native type is <span class='object_link'><a href="OpenHAB/Core/Types/PercentType.html" title="OpenHAB::Core::Types::PercentType (class)">PercentType</a></span>.
In some contexts, you don't care about the precise value of a particular state, and just want to know if it fits the general definition of <span class='object_link'><a href="OpenHAB/Core/Types/OnOffType.html#ON-constant" title="OpenHAB::Core::Types::OnOffType::ON (constant)">ON</a></span>, etc.
You can either explicitly convert to the general type, <em>or</em> all of the state predicate methods available on <span class='object_link'><a href="OpenHAB/Core/Items/Item.html" title="OpenHAB::Core::Items::Item (module)">Item</a></span>, <span class='object_link'><a href="OpenHAB/Core/Events/ItemStateEvent.html" title="OpenHAB::Core::Events::ItemStateEvent (class)">ItemStateEvent</a></span>, <span class='object_link'><a href="OpenHAB/Core/Events/ItemStateChangedEvent.html" title="OpenHAB::Core::Events::ItemStateChangedEvent (class)">ItemStateChangedEvent</a></span>, <span class='object_link'><a href="OpenHAB/Core/Events/ItemCommandEvent.html" title="OpenHAB::Core::Events::ItemCommandEvent (class)">ItemCommandEvent</a></span>, as well as specific types such as <span class='object_link'><a href="OpenHAB/Core/Types/PercentType.html" title="OpenHAB::Core::Types::PercentType (class)">PercentType</a></span> and <span class='object_link'><a href="OpenHAB/Core/Types/HSBType.html" title="OpenHAB::Core::Types::HSBType (class)">HSBType</a></span>, will do the conversion internally.</p>
<pre class="code ruby"><code class="ruby"><span class="constant">DimmerItem1</span>.update(<span class="integer">10</span>)
sleep <span class="integer">1</span>
<span class="constant">DimmerItem1</span>.state == <span class="integer">10</span> <span class="comment"># =&gt; true</span>
<span class="constant">DimmerItem1</span>.state == <span class="constant">ON</span> <span class="comment"># =&gt; false</span>
<span class="constant">DimmerItem1</span>.state.as(<span class="constant">OnOffType</span>) == <span class="constant">ON</span> <span class="comment"># =&gt; true</span>
<span class="constant">DimmerItem1</span>.state.on? <span class="comment"># =&gt; true</span>
<span class="constant">DimmerItem1</span>.on? <span class="comment"># =&gt; true</span>
<span class="constant">DimmerItem1</span>.off? <span class="comment"># =&gt; false</span>

rule <span class="string"><span class="delimiter">'</span><span class="content">command</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  received_command <span class="constant">DimmerItem1</span>
  run <span class="keyword">do</span> |event|
    <span class="keyword">if</span> event.on?
      <span class="comment"># This will be executed even when the command is a positive PercentType</span>
      <span class="comment"># instead of an actual ON command</span>
      logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">DimmerItem1 is being turned on</span><span class="delimiter">&quot;</span></span>)
    <span class="keyword">end</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>

<span class="constant">DimmerItem1</span> &lt;&lt; <span class="integer">100</span> <span class="comment"># =&gt; This will trigger the logger.info above</span>
</code></pre>
<h4 id="metadata"><a href="#metadata" class="header-anchor">#</a>Metadata</h4>
<p>Metadata is accessed through <span class='object_link'><a href="OpenHAB/Core/Items/Item.html#metadata-instance_method" title="OpenHAB::Core::Items::Item#metadata (method)">Item#metadata</a></span>.</p>
<pre class="code ruby"><code class="ruby">metadata = <span class="constant">My_Item</span>.metadata[<span class="string"><span class="delimiter">'</span><span class="content">namespace</span><span class="delimiter">'</span></span>].value
</code></pre>
<h4 id="persistence"><a href="#persistence" class="header-anchor">#</a>Persistence</h4>
<p><span class='object_link'><a href="OpenHAB/Core/Items/Persistence.html" title="OpenHAB::Core::Items::Persistence (module)">Persistence</a></span> methods are available directly on <span class='object_link'><a href="OpenHAB/Core/Items/Item.html" title="OpenHAB::Core::Items::Item (module)">Items</a></span>.</p>
<pre class="code ruby"><code class="ruby">logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">KitchenDimmer average_since </span><span class="inline"><span class="inline-delimiter">#{</span><span class="constant">KitchenDimmer</span>.average_since(<span class="integer">1</span>.day.ago)<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)
daily_max = <span class="constant">My_Item</span>.maximum_since(<span class="integer">24</span>.hours.ago)
</code></pre>
<h4 id="semantic-model"><a href="#semantic-model" class="header-anchor">#</a>Semantic Model</h4>
<p>Many <span class='object_link'><a href="OpenHAB/Core/Items/Semantics.html" title="OpenHAB::Core::Items::Semantics (module)">helper methods</a></span> are available to make it easy to navigate the semantic model to get related items.</p>
<pre class="code ruby"><code class="ruby"><span class="constant">LivingRoom_Motion</span>.location                            <span class="comment"># Location of the motion sensor</span>
                 .equipments(<span class="constant">Semantics</span>::<span class="constant">Lightbulb</span>)    <span class="comment"># Get all Lightbulb Equipments in the location</span>
                 .members                             <span class="comment"># Get all the member items of the equipments</span>
                 .points(<span class="constant">Semantics</span>::<span class="constant">Switch</span>)           <span class="comment"># Select only items that are Switch Points</span>
                 .on                                  <span class="comment"># Send an ON command to the items</span>
</code></pre>
<h4 id="linked-things"><a href="#linked-things" class="header-anchor">#</a>Linked Things</h4>
<p>If an <span class='object_link'><a href="OpenHAB/Core/Items/Item.html" title="OpenHAB::Core::Items::Item (module)">Item</a></span> is linked to a <span class='object_link'><a href="OpenHAB/Core/Things/Thing.html" title="OpenHAB::Core::Things::Thing (module)">Thing</a></span>, you can easily retrieve it.</p>
<pre class="code ruby"><code class="ruby">linked_thing = <span class="constant">My_Item</span>.thing
thing_uid = <span class="constant">My_Item</span>.thing.uid
</code></pre>
<p>An item can be linked to multiple things:</p>
<pre class="code ruby"><code class="ruby"><span class="constant">My_Item</span>.things.each <span class="keyword">do</span> |thing|
  logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Thing: </span><span class="inline"><span class="inline-delimiter">#{</span>thing.uid<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)
<span class="keyword">end</span>
</code></pre>
<h4 id="item-builder"><a href="#item-builder" class="header-anchor">#</a>Item Builder</h4>
<p>New items can be created via <span class='object_link'><a href="OpenHAB/Core/Items/Registry.html#build-instance_method" title="OpenHAB::Core::Items::Registry#build (method)">items.build</a></span>.
Note that by default items are not persisted to storage, and will be removed when the script unloads.</p>
<pre class="code ruby"><code class="ruby">items.build <span class="keyword">do</span>
  switch_item <span class="constant">MySwitch</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">My Switch</span><span class="delimiter">&quot;</span></span>
  switch_item <span class="constant">NotAutoupdating</span>, <span class="key">autoupdate</span>: <span class="predefined-constant">false</span>, <span class="key">channel</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">mqtt:topic:1#light</span><span class="delimiter">&quot;</span></span>
  group_item <span class="constant">MyGroup</span> <span class="keyword">do</span>
    contact_item <span class="constant">ItemInGroup</span>, <span class="key">channel</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">binding:thing#channel</span><span class="delimiter">&quot;</span></span>
  <span class="keyword">end</span>
  <span class="comment"># passing `thing` to a group item will automatically use it as the base</span>
  <span class="comment"># for item channels</span>
  group_item <span class="constant">Equipment</span>, <span class="key">tags</span>: <span class="constant">Semantics</span>::<span class="constant">HVAC</span>, <span class="key">thing</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">binding:thing</span><span class="delimiter">&quot;</span></span>
    string_item <span class="constant">Mode</span>, <span class="key">tags</span>: <span class="constant">Semantics</span>::<span class="constant">Control</span>, <span class="key">channel</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">mode</span><span class="delimiter">&quot;</span></span>
  <span class="keyword">end</span>

  <span class="comment"># dimension Temperature inferred</span>
  number_item <span class="constant">OutdoorTemp</span>, <span class="key">format</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">%.1f %unit%</span><span class="delimiter">&quot;</span></span>, <span class="key">unit</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">°F</span><span class="delimiter">&quot;</span></span>
    
  <span class="comment"># unit lx, dimension Illuminance, format &quot;%s %unit%&quot; inferred</span>
  number_item <span class="constant">OutdoorBrightness</span>, <span class="key">state</span>: <span class="integer">10_000</span> | <span class="string"><span class="delimiter">&quot;</span><span class="content">lx</span><span class="delimiter">&quot;</span></span>
<span class="keyword">end</span>
</code></pre>
<h3 id="things"><a href="#things" class="header-anchor">#</a>Things</h3>
<p>The <span class='object_link'><a href="OpenHAB/DSL.html#things-class_method" title="OpenHAB::DSL.things (method)">things</a></span> object allows interactions with openHAB things.</p>
<p>Get Thing Status:</p>
<pre class="code ruby"><code class="ruby">things[<span class="string"><span class="delimiter">'</span><span class="content">lgwebos:WebOSTV:main-tv</span><span class="delimiter">'</span></span>].status
</code></pre>
<p>Check if Thing is Online:</p>
<pre class="code ruby"><code class="ruby">things[<span class="string"><span class="delimiter">'</span><span class="content">lgwebos:WebOSTV:main-tv</span><span class="delimiter">'</span></span>].online?
</code></pre>
<p>or</p>
<pre class="code ruby"><code class="ruby">things[<span class="string"><span class="delimiter">'</span><span class="content">lgwebos:WebOSTV:main-tv</span><span class="delimiter">'</span></span>].status == <span class="constant">ThingStatus</span>::<span class="constant">ONLINE</span>
</code></pre>
<p>Enable/Disable a Thing:</p>
<pre class="code ruby"><code class="ruby">thing = things[<span class="string"><span class="delimiter">'</span><span class="content">lgwebos:WebOSTV:main-tv</span><span class="delimiter">'</span></span>]

thing.disable
logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">TV enabled: </span><span class="inline"><span class="inline-delimiter">#{</span>thing.enabled?<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>

thing.enable
logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">TV enabled: </span><span class="inline"><span class="inline-delimiter">#{</span>thing.enabled?<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
</code></pre>
<p>Get Thing's configurations:</p>
<pre class="code ruby"><code class="ruby">server = things[<span class="string"><span class="delimiter">&quot;</span><span class="content">smtp:mail:local</span><span class="delimiter">&quot;</span></span>].configuration[<span class="string"><span class="delimiter">&quot;</span><span class="content">hostname</span><span class="delimiter">&quot;</span></span>]
logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Configured SMTP Server: </span><span class="inline"><span class="inline-delimiter">#{</span>server<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>

frontporch_cam_ip = things[<span class="string"><span class="delimiter">&quot;</span><span class="content">ipcamera:dahua:frontporch</span><span class="delimiter">&quot;</span></span>].configuration[<span class="string"><span class="delimiter">&quot;</span><span class="content">ipAddress</span><span class="delimiter">&quot;</span></span>]
logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Front Porch Camera's IP Address: </span><span class="inline"><span class="inline-delimiter">#{</span>frontporch_cam_ip<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
</code></pre>
<p>Get Thing's property:</p>
<pre class="code ruby"><code class="ruby">model_id = things[<span class="string"><span class="delimiter">&quot;</span><span class="content">fronius:meter:mybridge:mymeter</span><span class="delimiter">&quot;</span></span>].properties[<span class="string"><span class="delimiter">&quot;</span><span class="content">modelId</span><span class="delimiter">&quot;</span></span>]
logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Fronius Smart Meter model: </span><span class="inline"><span class="inline-delimiter">#{</span>model_id<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
</code></pre>
<h3 id="actions"><a href="#actions" class="header-anchor">#</a>Actions</h3>
<p><a href="https://www.openhab.org/docs/configuration/actions.html">openHAB built-in actions</a> are available as children of the <span class='object_link'><a href="OpenHAB/Core/Actions.html" title="OpenHAB::Core::Actions (module)">Actions</a></span> module.
Action classes are also imported into the top-level namespace.
Thing actions can be called directly on the <span class='object_link'><a href="OpenHAB/Core/Things/Thing.html" title="OpenHAB::Core::Things::Thing (module)">Thing</a></span>.</p>
<p>Publish an MQTT Message:</p>
<pre class="code ruby"><code class="ruby">things[<span class="string"><span class="delimiter">'</span><span class="content">mqtt:broker:mybroker</span><span class="delimiter">'</span></span>].publish_mqtt(<span class="string"><span class="delimiter">'</span><span class="content">topic/name</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">payload</span><span class="delimiter">'</span></span>)
</code></pre>
<p>Send an Email:</p>
<pre class="code ruby"><code class="ruby">things[<span class="string"><span class="delimiter">'</span><span class="content">mail:smtp:mymailthing</span><span class="delimiter">'</span></span>].send_mail(<span class="string"><span class="delimiter">'</span><span class="content">me@example.com</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Subject</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">message body</span><span class="delimiter">'</span></span>)
</code></pre>
<p>Play Sound Through the Default Audio Sink:</p>
<pre class="code ruby"><code class="ruby"><span class="constant">Audio</span>.play_sound <span class="string"><span class="delimiter">'</span><span class="content">sound_file.mp3</span><span class="delimiter">'</span></span>
</code></pre>
<p>Execute a Command:</p>
<pre class="code ruby"><code class="ruby"><span class="constant">Exec</span>.execute_command_line(<span class="string"><span class="delimiter">'</span><span class="content">/path/to/program</span><span class="delimiter">'</span></span>)
</code></pre>
<h3 id="logging"><a href="#logging" class="header-anchor">#</a>Logging</h3>
<p>The JRuby Scripting addon has a global <code>logger</code> object for logging.
To log a message on <code>INFO</code> log level:</p>
<pre class="code ruby"><code class="ruby">logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">The current time is </span><span class="inline"><span class="inline-delimiter">#{</span><span class="constant">Time</span>.now<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)
</code></pre>
<p>The default logger name for UI rules is <code>org.openhab.automation.jrubyscripting.script</code>.
For file-based rules, it's based on the rule's ID, such as <code>org.openhab.automation.jrubyscripting.rule.myrule.rb:15</code>.</p>
<p>To use a custom logger name:</p>
<pre class="code ruby"><code class="ruby">logger = <span class="constant">OpenHAB</span>::<span class="constant">Log</span>.logger(<span class="string"><span class="delimiter">&quot;</span><span class="content">org.openhab.custom</span><span class="delimiter">&quot;</span></span>)
</code></pre>
<p>Please be aware that messages might not appear in the logs if the logger name does not start with <code>org.openhab</code>.
This behaviour is due to <a href="https://logging.apache.org/log4j/2.x/">log4j2</a> requiring definition for each logger prefix.</p>
<p>The <span class='object_link'><a href="OpenHAB/Logger.html" title="OpenHAB::Logger (class)">logger</a></span> is similar to a standard <a href="https://docs.ruby-lang.org/en/master/Logger.html">Ruby Logger</a>.
Supported logging functions include:</p>
<ul>
<li><code>logger.log(severity, obj)</code></li>
<li><code>logger.info(obj)</code></li>
<li><code>logger.warn(obj)</code></li>
<li><code>logger.error(obj)</code></li>
<li><code>logger.debug(obj)</code></li>
<li><code>logger.trace(obj)</code></li>
</ul>
<p><code>obj</code> is any Ruby (or Java) object.
<code>#to_s</code> (or <code>toString()</code> if it's a Java object) is called on <code>obj</code>, and the result is output to the openHAB log.
Additionally, all of these methods can take a <a href="https://ruby-doc.com/docs/ProgrammingRuby/html/tut_containers.html#S2">Ruby block</a> instead, which will only be called if logging is enabled at the given level, and the result of the block will be treated as the log message.</p>
<h3 id="timers"><a href="#timers" class="header-anchor">#</a>Timers</h3>
<pre class="code ruby"><code class="ruby">sleep <span class="float">1.5</span> <span class="comment"># sleep for 1.5 seconds</span>
</code></pre>
<p>See Ruby docs on <a href="https://docs.ruby-lang.org/en/master/Kernel.html#method-i-sleep">sleep</a>.</p>
<p><code>sleep</code> should be avoided if possible.
A <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#delay-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#delay (method)">delay</a></span> can be inserted in between two execution blocks to achieve the same result.
This delay is implemented with a timer.
This is available only on file-based rules.</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">delay something</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  on_load
  run { logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">This will run immediately</span><span class="delimiter">&quot;</span></span> }
  delay <span class="integer">10</span>.seconds
  run { logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">This will run 10 seconds after</span><span class="delimiter">&quot;</span></span> }
<span class="keyword">end</span>
</code></pre>
<p>Alternatively a timer can be used in either a file-based rule or in a UI based rule using <span class='object_link'><a href="OpenHAB/DSL.html#after-class_method" title="OpenHAB::DSL.after (method)">after</a></span>.
After takes a <a href="#durations">Duration</a>, e.g. <code>10.minutes</code> instead of using <span class='object_link'><a href="OpenHAB/CoreExt/Java/ZonedDateTime.html" title="OpenHAB::CoreExt::Java::ZonedDateTime (class)">ZonedDateTime</a></span>.</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">simple timer</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  changed <span class="constant">Watering_System</span>, <span class="key">to</span>: <span class="constant">ON</span>
  run <span class="keyword">do</span>
    after(<span class="integer">5</span>.minutes) { <span class="constant">Watering_System</span>.off }
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<p>When a script is unloaded, all created timers are automatically cancelled.</p>
<h4 id="accessing-variables"><a href="#accessing-variables" class="header-anchor">#</a>Accessing Variables <!-- raw HTML omitted --></h4>
<p>You can access all variables of the current context in the created timers.</p>
<p>Note: Variables can be mutated (changed) after the timer has been created.
Be aware that this can lead to unintentional side effects, e.g. when you change the variable after timer creation, which can make debugging quite difficult!</p>
<pre class="code ruby"><code class="ruby">my_var = <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello world!</span><span class="delimiter">&quot;</span></span>;

<span class="comment"># Schedule a timer that expires in ten seconds</span>
after(<span class="integer">10</span>.seconds) <span class="keyword">do</span>
  logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Timer expired with my_var = '</span><span class="inline"><span class="inline-delimiter">#{</span>my_var<span class="inline-delimiter">}</span></span><span class="content">'</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">end</span>

my_var = <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello mutation!</span><span class="delimiter">&quot;</span></span> <span class="comment"># When the timer runs, it will log &quot;Hello mutation!&quot; instead of &quot;Hello world!&quot;</span>
</code></pre>
<h4 id="reschedule-a-timer"><a href="#reschedule-a-timer" class="header-anchor">#</a>Reschedule a Timer <!-- raw HTML omitted --></h4>
<p>A timer can be rescheduled inside the timer body</p>
<pre class="code ruby"><code class="ruby">after(<span class="integer">3</span>.minutes) <span class="keyword">do</span> |timer|
  <span class="constant">My_Light</span>.on
  timer.reschedule <span class="comment"># This will reschedule it for the same initial duration, i.e. 3 minutes in this case</span>
<span class="keyword">end</span>
</code></pre>
<p>Or it can be rescheduled from outside the timer</p>
<pre class="code ruby"><code class="ruby">my_timer = after(<span class="integer">3</span>.minutes) <span class="keyword">do</span>
  <span class="constant">My_Light</span>.on
<span class="keyword">end</span>

my_timer.reschedule <span class="comment"># Use the same initial duration</span>
</code></pre>
<p>It can be rescheduled to a different duration</p>
<pre class="code ruby"><code class="ruby">after(<span class="integer">3</span>.minutes) <span class="keyword">do</span> |timer|
  <span class="constant">My_Light</span>.on
  timer.reschedule(<span class="integer">1</span>.minute)
<span class="keyword">end</span>
</code></pre>
<p>It can also be canceled:</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">'</span><span class="content">cancel timer</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  changed <span class="constant">Light_Item</span>, <span class="key">to</span>: <span class="constant">OFF</span>
  run { my_timer&amp;.cancel }
<span class="keyword">end</span>
</code></pre>
<h4 id="manage-multiple-timers"><a href="#manage-multiple-timers" class="header-anchor">#</a>Manage Multiple Timers <!-- raw HTML omitted --></h4>
<p>Multiple timers can be managed in the traditional way by storing the timer objects in a Hash:</p>
<pre class="code ruby"><code class="ruby"><span class="instance-variable">@timers</span> ||= {}

<span class="keyword">if</span> <span class="instance-variable">@timers</span>[event.item]
  <span class="instance-variable">@timers</span>[event.item].reschedule
<span class="keyword">else</span>
  <span class="instance-variable">@timers</span>[event.item] = after <span class="integer">3</span>.minutes <span class="keyword">do</span> <span class="comment"># Use the triggering item as the timer ID</span>
    event.item.off
    <span class="instance-variable">@timers</span>.delete(event.item)
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<p>However, a built in mechanism is available to help manage multiple timers, and is done in a thread-safe manner.
This is done using timer IDs.
The following rule automatically finds and reschedules the timer matching the same ID, which corresponds to each group member.</p>
<pre class="code ruby"><code class="ruby">after <span class="integer">3</span>.minutes, <span class="key">id</span>: event.item <span class="keyword">do</span> <span class="comment"># Use the triggering item as the timer ID</span>
  event.item.off
<span class="keyword">end</span>
</code></pre>
<p>Furthermore, you can manipulate the managed timers using the built-in <span class='object_link'><a href="OpenHAB/DSL/TimerManager.html" title="OpenHAB::DSL::TimerManager (class)">timers</a></span> object.</p>
<pre class="code ruby"><code class="ruby"><span class="comment"># timers is a special object to access the timers created with an id</span>
rule <span class="string"><span class="delimiter">&quot;</span><span class="content">cancel all timers</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  received_command <span class="constant">Cancel_All_Timers</span>, <span class="key">command</span>: <span class="constant">ON</span> <span class="comment"># Send a command to this item to cancel all timers</span>
  run <span class="keyword">do</span>
    gOutdoorLights.members.each <span class="keyword">do</span> |item_as_timer_id|
      timers.cancel(item_as_timer_id)
    <span class="keyword">end</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>

rule <span class="string"><span class="delimiter">&quot;</span><span class="content">reschedule all timers</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  received_command <span class="constant">Reschedule_All_Timers</span>, <span class="key">command</span>: <span class="constant">ON</span> <span class="comment"># Send a command to this item to restart all timers</span>
  run <span class="keyword">do</span>
    gOutdoorLights.members.each <span class="keyword">do</span> |item_as_timer_id|
      timers.reschedule(item_as_timer_id)
    <span class="keyword">end</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<h3 id="cache"><a href="#cache" class="header-anchor">#</a>Cache</h3>
<p>The <span class='object_link'><a href="OpenHAB/DSL.html#shared_cache-class_method" title="OpenHAB::DSL.shared_cache (method)">shared_cache</a></span> object provides a cache that can be used to set and retrieve objects that will be persisted between reloads of scripts, and available between different rules.
It acts similarly to a regular Ruby Hash.
Just be wary of Ruby-only data types (such as Symbols) that won't be accessible between different scripts.</p>
<p>Get a previously set object with a default value:</p>
<pre class="code ruby"><code class="ruby">shared_cache.compute_if_absent(<span class="symbol">:counter</span>) { <span class="integer">0</span> } <span class="comment"># Initialize with 0 if it didn't exist</span>
logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Count: </span><span class="inline"><span class="inline-delimiter">#{</span>shared_cache[<span class="symbol">:counter</span>] += <span class="integer">1</span><span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)
</code></pre>
<p>Get a previously set object, or assign it (this version is subject to race conditions with other scripts):</p>
<pre class="code ruby"><code class="ruby">shared_cache[<span class="symbol">:counter</span>] ||= <span class="integer">0</span>
logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Count: </span><span class="inline"><span class="inline-delimiter">#{</span>shared_cache[<span class="symbol">:counter</span>] += <span class="integer">1</span><span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)
</code></pre>
<p>Get a previously set object with a default value, without assigning it (this version has an even longer amount of time between fetching the value and assigning it):</p>
<pre class="code ruby"><code class="ruby">count = shared_cache.fetch(<span class="symbol">:counter</span>) { <span class="integer">0</span> }
shared_cache[<span class="symbol">:counter</span>] = count + <span class="integer">1</span>
</code></pre>
<h3 id="time"><a href="#time" class="header-anchor">#</a>Time</h3>
<p>Several options are available for time related code, including but not limited to:</p>
<ul>
<li>Java <span class='object_link'><a href="OpenHAB/CoreExt/Java/LocalDate.html" title="OpenHAB::CoreExt::Java::LocalDate (class)">LocalDate</a></span> - represents a date with no time</li>
<li>Java <span class='object_link'><a href="OpenHAB/CoreExt/Java/LocalTime.html" title="OpenHAB::CoreExt::Java::LocalTime (class)">LocalTime</a></span> - represents a time with no date</li>
<li>Java <span class='object_link'><a href="OpenHAB/CoreExt/Java/Month.html" title="OpenHAB::CoreExt::Java::Month (class)">Month</a></span></li>
<li>Java <span class='object_link'><a href="OpenHAB/CoreExt/Java/MonthDay.html" title="OpenHAB::CoreExt::Java::MonthDay (class)">MonthDay</a></span> - represents a date with no time or year</li>
<li>Java <span class='object_link'><a href="OpenHAB/CoreExt/Java/ZonedDateTime.html" title="OpenHAB::CoreExt::Java::ZonedDateTime (class)">ZonedDateTime</a></span> - represents a specific instance with a date and time</li>
<li>Java <span class='object_link'><a href="OpenHAB/CoreExt/Java/Duration.html" title="OpenHAB::CoreExt::Java::Duration (class)">Duration</a></span></li>
<li>Java <span class='object_link'><a href="OpenHAB/CoreExt/Java/Period.html" title="OpenHAB::CoreExt::Java::Period (class)">Period</a></span></li>
<li>Ruby <a href="https://docs.ruby-lang.org/en/master/Date.html">Date</a> - represents a date with no time</li>
<li>Ruby <a href="https://docs.ruby-lang.org/en/master/Time.html">Time</a> - represents a specific instant with a date and time</li>
<li>Ruby <a href="https://docs.ruby-lang.org/en/master/DateTime.html">DateTime</a> - represents a specific instant with a date and time</li>
</ul>
<h4 id="durations"><a href="#durations" class="header-anchor">#</a>Durations <!-- raw HTML omitted --></h4>
<p>Ruby <a href="https://docs.ruby-lang.org/en/master/Integer.html">integers</a> and <a href="https://docs.ruby-lang.org/en/master/Float.html">floats</a> are extended with several methods to support durations.
These methods create a new <span class='object_link'><a href="OpenHAB/CoreExt/Java/Duration.html" title="OpenHAB::CoreExt::Java::Duration (class)">Duration</a></span> or <span class='object_link'><a href="OpenHAB/CoreExt/Java/Period.html" title="OpenHAB::CoreExt::Java::Period (class)">Period</a></span> object that is used by the <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#every-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#every (method)">every</a></span> trigger, <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#delay-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#delay (method)">delay</a></span> block, the for option of <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#changed-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#changed (method)">changed</a></span> triggers, and <span class='object_link'><a href="OpenHAB/Core/Timer.html" title="OpenHAB::Core::Timer (class)">timers</a></span>.</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">run every 30 seconds</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  every <span class="integer">30</span>.seconds
  run { logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span>) }
<span class="keyword">end</span>
</code></pre>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Warn about open door</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  changed <span class="constant">FrontDoor</span>, <span class="key">to</span>: <span class="constant">OPEN</span>, <span class="key">for</span>: <span class="integer">10</span>.minutes
  run { |event| logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">#{</span>event.item.name<span class="inline-delimiter">}</span></span><span class="content"> has been open for 10 minutes</span><span class="delimiter">&quot;</span></span>) }
<span class="keyword">end</span>
</code></pre>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Timer example</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  on_load
  run <span class="keyword">do</span>
    after(<span class="integer">3</span>.hours) { logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">3 hours have passed</span><span class="delimiter">&quot;</span></span>) }
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<h4 id="time-comparisons-conversions-and-arithmetic"><a href="#time-comparisons-conversions-and-arithmetic" class="header-anchor">#</a>Time Comparisons, Conversions, and Arithmetic <!-- raw HTML omitted --></h4>
<p>Comparisons, conversions and arithmetic are automatic between Java and Ruby types.
Note that anytime you do a comparison between a type with more specific data, and a type missing specific data, the comparison is done as if the more specific data is at the beginning of its period.
I.e. comparing a time to a month, the month will be treated as 00:00:00 on the first day of the month.
When comparing with a type that's missing more generic data, it will be filled in from the other object.
I.e. comparing a time to a month, the month will be assumed to be in the same year as the time.</p>
<pre class="code ruby"><code class="ruby"><span class="comment"># Get current date/time</span>
now = <span class="constant">ZonedDateTime</span>.now
one_hour_from_now = <span class="constant">ZonedDateTime</span>.now + <span class="integer">60</span>.minutes
one_hour_from_now = <span class="integer">1</span>.hour.from_now <span class="comment"># or use the simpler helper method that also returns a ZonedDateTime</span>
<span class="comment"># Or use Ruby time</span>
ruby_now = <span class="constant">Time</span>.now

<span class="comment"># Compare them</span>
<span class="keyword">if</span> one_hour_from_now &gt; now
  logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">As it should be</span><span class="delimiter">&quot;</span></span>
<span class="keyword">end</span>

<span class="comment"># Comparing Ruby Time and ZonedDateTime works just fine</span>
<span class="keyword">if</span> one_hour_from_now &gt; ruby_now
  logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">It works too</span><span class="delimiter">&quot;</span></span>
<span class="keyword">end</span>

<span class="keyword">if</span> <span class="constant">Time</span>.now &gt; <span class="constant">LocalTime</span>.parse(<span class="string"><span class="delimiter">'</span><span class="content">7am</span><span class="delimiter">'</span></span>)
  logger.info <span class="string"><span class="delimiter">'</span><span class="content">Wake up!</span><span class="delimiter">'</span></span>
<span class="keyword">end</span>

<span class="keyword">if</span> <span class="constant">MonthDay</span>.now == <span class="constant">MonthDay</span>.parse(<span class="string"><span class="delimiter">'</span><span class="content">02-14</span><span class="delimiter">'</span></span>)
  logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Happy Valentine's Day!</span><span class="delimiter">&quot;</span></span>
<span class="keyword">end</span>

<span class="comment"># Ranges can cross midnight</span>
<span class="keyword">if</span> <span class="constant">Time</span>.now.between?(<span class="string"><span class="delimiter">'</span><span class="content">10pm</span><span class="delimiter">'</span></span>..<span class="string"><span class="delimiter">'</span><span class="content">5am</span><span class="delimiter">'</span></span>)
  logger.info <span class="string"><span class="delimiter">'</span><span class="content">Sleep time</span><span class="delimiter">'</span></span>
<span class="keyword">end</span>

<span class="comment"># Explicit conversions</span>
<span class="constant">ZonedDateTime</span>.now.to_time
<span class="constant">Time</span>.now.to_zoned_date_time

<span class="comment"># You can parse string as time</span>
wake_up_time = <span class="constant">LocalTime</span>.parse(<span class="string"><span class="delimiter">&quot;</span><span class="content">6:00 am</span><span class="delimiter">&quot;</span></span>)

<span class="comment"># Compare now against LocalTime</span>
<span class="keyword">if</span> <span class="constant">ZonedDateTime</span>.now &gt;= wake_up_time
  <span class="constant">Wake_Up_Alarm</span>.on
<span class="keyword">end</span>

<span class="comment"># Even compare against Ruby Time</span>
<span class="keyword">if</span> <span class="constant">Time</span>.now &gt;= wake_up_time
  <span class="constant">Wake_Up_Alarm</span>.on
<span class="keyword">end</span>

<span class="comment"># Get today's start of the day (midnight)</span>
start_of_day = <span class="constant">ZonedDateTime</span>.now.with(<span class="constant">LocalTime</span>::<span class="constant">MIDNIGHT</span>)
<span class="comment"># or</span>
start_of_day = <span class="constant">LocalTime</span>::<span class="constant">MIDNIGHT</span>.to_zoned_date_time

<span class="comment"># Comparing ZonedDateTime against LocalTime with `&lt;`</span>
max = <span class="constant">Solar_Power</span>.maximum_since(<span class="integer">24</span>.hours.ago)
<span class="keyword">if</span> max.timestamp &lt; <span class="constant">LocalTime</span>::<span class="constant">NOON</span>
  logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Max solar power </span><span class="inline"><span class="inline-delimiter">#{</span>max<span class="inline-delimiter">}</span></span><span class="content"> happened before noon, at: </span><span class="inline"><span class="inline-delimiter">#{</span>max.timestamp<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
<span class="keyword">end</span>

<span class="comment"># Comparing Time against ZonedDateTime with `&gt;`</span>
sunset = things[<span class="string"><span class="delimiter">&quot;</span><span class="content">astro:sun:home</span><span class="delimiter">&quot;</span></span>].get_event_time(<span class="string"><span class="delimiter">&quot;</span><span class="content">SUN_SET</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">nil</span>, <span class="predefined-constant">nil</span>)
<span class="keyword">if</span> <span class="constant">Time</span>.now &gt; sunset
  logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">it is after sunset</span><span class="delimiter">&quot;</span></span>
<span class="keyword">end</span>

<span class="comment"># Subtracting Duration from Time and comparing Time against ZonedDateTime</span>
<span class="constant">Motion_Sensor</span>.last_update &lt; <span class="constant">Time</span>.now - <span class="integer">10</span>.minutes
<span class="comment"># Alternatively:</span>
<span class="constant">Motion_Sensor</span>.last_update &lt; <span class="integer">10</span>.minutes.ago

<span class="comment"># Finding The Duration Between Two Times</span>
elapsed_time = <span class="constant">Time</span>.now - <span class="constant">Motion_Sensor</span>.last_update
<span class="comment"># Alternatively:</span>
elapsed_time = <span class="constant">ZonedDateTime</span>.now - <span class="constant">Motion_Sensor</span>.last_update

<span class="comment"># Using `-` operator with ZonedDateTime</span>
<span class="comment"># Comparing two ZonedDateTime using `&lt;`</span>
<span class="constant">Motion_Sensor</span>.last_update &lt; <span class="constant">Light_Item</span>.last_update - <span class="integer">10</span>.minutes
<span class="comment"># is the same as:</span>
<span class="constant">Motion_Sensor</span>.last_update.before?(<span class="constant">Light_Item</span>.last_update.minus_minutes(<span class="integer">10</span>))

<span class="comment"># Getting Epoch Second</span>
<span class="constant">Time</span>.now.to_i
<span class="constant">ZonedDateTime</span>.now.to_i
<span class="constant">ZonedDateTime</span>.now.to_epoch_second

<span class="comment"># Convert Epoch second to time</span>
<span class="constant">Time</span>.at(<span class="integer">1669684403</span>)

<span class="comment"># Convert Epoch second to ZonedDateTime</span>
<span class="constant">Time</span>.at(<span class="integer">1669684403</span>).to_zoned_date_time
<span class="comment"># or</span>
java.time.Instant.of_epoch_second(<span class="integer">1669684403</span>).at_zone(<span class="constant">ZoneId</span>.system_default)
</code></pre>
<h4 id="ranges"><a href="#ranges" class="header-anchor">#</a>Ranges <!-- raw HTML omitted --></h4>
<p>Ranges of date time objects work as expected.
Make sure to use <code>#cover?</code> instead of <code>#include?</code> to do a simple comparison, instead of generating an array and searching it linearly.
Ranges of non-absolute, "circular" types (<span class='object_link'><a href="OpenHAB/CoreExt/Java/LocalTime.html" title="OpenHAB::CoreExt::Java::LocalTime (class)">LocalTime</a></span>, <span class='object_link'><a href="OpenHAB/CoreExt/Java/Month.html" title="OpenHAB::CoreExt::Java::Month (class)">Month</a></span>, <span class='object_link'><a href="OpenHAB/CoreExt/Java/MonthDay.html" title="OpenHAB::CoreExt::Java::MonthDay (class)">MonthDay</a></span>) are smart enough to automatically handle boundary issues.
Coarse types (like <span class='object_link'><a href="OpenHAB/CoreExt/Java/LocalDate.html" title="OpenHAB::CoreExt::Java::LocalDate (class)">LocalDate</a></span>, <span class='object_link'><a href="OpenHAB/CoreExt/Java/Month.html" title="OpenHAB::CoreExt::Java::Month (class)">Month</a></span>, <span class='object_link'><a href="OpenHAB/CoreExt/Java/MonthDay.html" title="OpenHAB::CoreExt::Java::MonthDay (class)">MonthDay</a></span>) will also work correctly when checking against a more specific type.
To easily parse strings into date-time ranges, use the <span class='object_link'><a href="OpenHAB/DSL.html#between-class_method" title="OpenHAB::DSL.between (method)">OpenHAB::DSL.between</a></span> helper.
<span class='object_link'><a href="OpenHAB/CoreExt/Java/Duration.html" title="OpenHAB::CoreExt::Java::Duration (class)">Duration</a></span>, <span class='object_link'><a href="OpenHAB/CoreExt/Java/ZonedDateTime.html" title="OpenHAB::CoreExt::Java::ZonedDateTime (class)">ZonedDateTime</a></span>, <span class='object_link'><a href="OpenHAB/CoreExt/Java/LocalTime.html" title="OpenHAB::CoreExt::Java::LocalTime (class)">LocalTime</a></span>, <span class='object_link'><a href="OpenHAB/CoreExt/Java/LocalDate.html" title="OpenHAB::CoreExt::Java::LocalDate (class)">LocalDate</a></span>, <span class='object_link'><a href="OpenHAB/CoreExt/Java/MonthDay.html" title="OpenHAB::CoreExt::Java::MonthDay (class)">MonthDay</a></span>, <span class='object_link'><a href="OpenHAB/CoreExt/Java/Month.html" title="OpenHAB::CoreExt::Java::Month (class)">Month</a></span>, <span class='object_link'><a href="Time.html" title="Time (class)">Time</a></span>, <span class='object_link'><a href="Date.html" title="Date (class)">Date</a></span>, and <span class='object_link'><a href="DateTime.html" title="DateTime (class)">DateTime</a></span> classes include <span class='object_link'><a href="OpenHAB/CoreExt/Between.html#between%3F-instance_method" title="OpenHAB::CoreExt::Between#between? (method)">between?</a></span> method that accepts a range of string or any of the date/time objects.</p>
<pre class="code ruby"><code class="ruby">between(<span class="string"><span class="delimiter">&quot;</span><span class="content">10:00</span><span class="delimiter">&quot;</span></span>..<span class="string"><span class="delimiter">&quot;</span><span class="content">14:00</span><span class="delimiter">&quot;</span></span>).cover?(<span class="constant">Time</span>.now)
between(<span class="string"><span class="delimiter">&quot;</span><span class="content">11pm</span><span class="delimiter">&quot;</span></span>..<span class="string"><span class="delimiter">&quot;</span><span class="content">1am</span><span class="delimiter">&quot;</span></span>).cover?(<span class="constant">Time</span>.now)

<span class="comment"># Or use the alternative syntax:</span>
<span class="constant">Time</span>.now.between?(<span class="string"><span class="delimiter">&quot;</span><span class="content">10:00</span><span class="delimiter">&quot;</span></span>..<span class="string"><span class="delimiter">&quot;</span><span class="content">14:00</span><span class="delimiter">&quot;</span></span>)
<span class="constant">Time</span>.now.between?(<span class="string"><span class="delimiter">&quot;</span><span class="content">11pm</span><span class="delimiter">&quot;</span></span>..<span class="string"><span class="delimiter">&quot;</span><span class="content">1am</span><span class="delimiter">&quot;</span></span>)

<span class="keyword">case</span> <span class="constant">Time</span>.now
<span class="keyword">when</span> between(<span class="string"><span class="delimiter">&quot;</span><span class="content">6:00</span><span class="delimiter">&quot;</span></span>...<span class="string"><span class="delimiter">&quot;</span><span class="content">12:00</span><span class="delimiter">&quot;</span></span>)
  logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Morning Time</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">when</span> between(<span class="string"><span class="delimiter">'</span><span class="content">12:00</span><span class="delimiter">'</span></span>..<span class="string"><span class="delimiter">'</span><span class="content">15:00</span><span class="delimiter">'</span></span>)
  logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Afternoon</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">else</span>
  logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Not in time range</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">end</span>

<span class="comment"># Compare against Month</span>
<span class="constant">Time</span>.now.between?(<span class="constant">Month</span>::<span class="constant">NOVEMBER</span>..<span class="constant">Month</span>::<span class="constant">DECEMBER</span>)
<span class="constant">Date</span>.today.between?(<span class="constant">Month</span>::<span class="constant">NOVEMBER</span>..<span class="constant">Month</span>::<span class="constant">DECEMBER</span>)
<span class="constant">ZonedDateTime</span>.now.between?(<span class="constant">Month</span>::<span class="constant">NOVEMBER</span>..<span class="constant">Month</span>::<span class="constant">DECEMBER</span>)

<span class="comment"># Compare against MonthDay</span>
<span class="constant">Time</span>.now.between?(<span class="string"><span class="delimiter">&quot;</span><span class="content">05-01</span><span class="delimiter">&quot;</span></span>..<span class="string"><span class="delimiter">&quot;</span><span class="content">12-01</span><span class="delimiter">&quot;</span></span>)

<span class="comment"># Compare against time of day</span>
<span class="constant">Time</span>.now.between?(<span class="string"><span class="delimiter">&quot;</span><span class="content">5am</span><span class="delimiter">&quot;</span></span>..<span class="string"><span class="delimiter">&quot;</span><span class="content">11pm</span><span class="delimiter">&quot;</span></span>)
</code></pre>
<h3 id="ephemeris"><a href="#ephemeris" class="header-anchor">#</a>Ephemeris</h3>
<p><span class='object_link'><a href="OpenHAB/CoreExt/Ephemeris.html" title="OpenHAB::CoreExt::Ephemeris (module)">Helper methods</a></span> to easily access <a href="https://www.openhab.org/docs/configuration/actions.html#ephemeris">openHAB's Ephemeris action</a> are provided on all date-like objects:</p>
<pre class="code ruby"><code class="ruby"><span class="constant">Time</span>.now.holiday? <span class="comment"># =&gt; false</span>
<span class="constant">MonthDay</span>.parse(<span class="string"><span class="delimiter">&quot;</span><span class="content">12-25</span><span class="delimiter">&quot;</span></span>).holiday <span class="comment"># =&gt; :christmas</span>
<span class="integer">1</span>.day.from_now.next_holiday <span class="comment"># =&gt; :thanksgiving</span>
<span class="constant">Notification</span>.send(<span class="string"><span class="delimiter">&quot;</span><span class="content">It's </span><span class="inline"><span class="inline-delimiter">#{</span><span class="constant">Ephemeris</span>.holiday_name(<span class="constant">Date</span>.today)<span class="inline-delimiter">}</span></span><span class="content">!</span><span class="delimiter">&quot;</span></span>) <span class="keyword">if</span> <span class="constant">Date</span>.today.holiday?

<span class="constant">Date</span>.today.weekend? <span class="comment"># =&gt; true</span>
<span class="constant">Date</span>.today.in_dayset?(<span class="symbol">:school</span>) <span class="comment"># =&gt; false</span>
</code></pre>
<h3 id="rules-scripts-and-scenes"><a href="#rules-scripts-and-scenes" class="header-anchor">#</a>Rules, Scripts, and Scenes</h3>
<p><span class='object_link'><a href="OpenHAB/Core/Rules/Rule.html" title="OpenHAB::Core::Rules::Rule (module)">Rules</a></span>, Scenes and Scripts can be accessed using the <span class='object_link'><a href="OpenHAB/Core/Rules/Registry.html" title="OpenHAB::Core::Rules::Registry (class)">rules</a></span> object.
For example, to execute/trigger a rule:</p>
<pre class="code ruby"><code class="ruby">rules[rule_uid].trigger
</code></pre>
<p>Scenes are rules with a <code>Scene</code> tag, and Scripts are rules with a <code>Script</code> tag.
They can be found using their uid just like normal rules, i.e. <code>rules[uid]</code>.
For convenience, a list of all Scenes are available through the enumerable <span class='object_link'><a href="OpenHAB/Core/Rules/Registry.html#scenes-instance_method" title="OpenHAB::Core::Rules::Registry#scenes (method)">rules.scenes</a></span>, and a list of all Scripts through <span class='object_link'><a href="OpenHAB/Core/Rules/Registry.html#scripts-instance_method" title="OpenHAB::Core::Rules::Registry#scripts (method)">rules.scripts</a></span>.</p>
<p>Example: All scenes tagged <code>sunrise</code> will be triggered at sunrise, and all scenes tagged <code>sunset</code> will be triggered at sunset.
Note: these use the <span class='object_link'><a href="OpenHAB/DSL/Rules/Terse.html" title="OpenHAB::DSL::Rules::Terse (module)">Terse Rule</a></span> syntax.</p>
<pre class="code ruby"><code class="ruby">channel(<span class="string"><span class="delimiter">&quot;</span><span class="content">astro:sun:home:rise#event</span><span class="delimiter">&quot;</span></span>) { rules.scenes.tagged(<span class="string"><span class="delimiter">&quot;</span><span class="content">sunrise</span><span class="delimiter">&quot;</span></span>).each(&amp;<span class="symbol">:trigger</span>) }
channel(<span class="string"><span class="delimiter">&quot;</span><span class="content">astro:sun:home:set#event</span><span class="delimiter">&quot;</span></span>) { rules.scenes.tagged(<span class="string"><span class="delimiter">&quot;</span><span class="content">sunset</span><span class="delimiter">&quot;</span></span>).each(&amp;<span class="symbol">:trigger</span>) }
</code></pre>
<p>Or it can be written as one rule with the help of <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#Triggers-group" title="group::OpenHAB::DSL::Rules::BuilderDSL::Triggers (group)">trigger attachments</a></span>.</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Activate scenes at sunset/sunrise</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  channel <span class="string"><span class="delimiter">&quot;</span><span class="content">astro:sun:home:rise#event</span><span class="delimiter">&quot;</span></span>, <span class="key">attach</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">sunrise</span><span class="delimiter">&quot;</span></span>
  channel <span class="string"><span class="delimiter">&quot;</span><span class="content">astro:sun:home:set#event</span><span class="delimiter">&quot;</span></span>, <span class="key">attach</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">sunset</span><span class="delimiter">&quot;</span></span>
  run { |event| rules.scenes.tagged(event.attachment).each(&amp;<span class="symbol">:trigger</span>) }
<span class="keyword">end</span>
</code></pre>
<p>Get the UID of a Rule</p>
<pre class="code ruby"><code class="ruby">rule_obj = rule <span class="string"><span class="delimiter">'</span><span class="content">my rule name</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  received_command <span class="constant">My_Item</span>
  run <span class="keyword">do</span>
    <span class="comment"># rule code here</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>

rule_uid = rule_obj.uid
</code></pre>
<p>A rule's UID can also be specified at rule creation</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">my rule name</span><span class="delimiter">&quot;</span></span>, <span class="key">id</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">my_unique_rule_uid</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  <span class="comment"># ...</span>
<span class="keyword">end</span>

<span class="comment"># or</span>
rule <span class="string"><span class="delimiter">&quot;</span><span class="content">my rule name</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  uid <span class="string"><span class="delimiter">&quot;</span><span class="content">my_unique_rule_uid</span><span class="delimiter">&quot;</span></span>
  <span class="comment"># ...</span>
<span class="keyword">end</span>
</code></pre>
<p>Get the UID of a Rule by Name</p>
<pre class="code ruby"><code class="ruby">rule_uid = rules.find { |rule| rule.name == <span class="string"><span class="delimiter">'</span><span class="content">This is the name of my rule</span><span class="delimiter">'</span></span> }.uid
</code></pre>
<p>Enable or Disable a Rule by UID</p>
<pre class="code ruby"><code class="ruby">rules[rule_uid].enable
rules[rule_uid].disable
</code></pre>
<h4 id="passing-values-to-rules"><a href="#passing-values-to-rules" class="header-anchor">#</a>Passing Values to Rules <!-- raw HTML omitted --></h4>
<p>A rule/script may be given additional context/data by the caller.
This additional data is available within the rule by referring to the names of the context variable.
This is applicable to both UI rules and file-based rules.</p>
<p>Within the script/rule body (either UI or file rule)</p>
<pre class="code ruby"><code class="ruby">script <span class="key">id</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">check_temp</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  <span class="keyword">if</span> <span class="constant">CPU_Temperature</span>.state &gt; maxTemperature
    logger.warn <span class="string"><span class="delimiter">&quot;</span><span class="content">The CPU is overheating!</span><span class="delimiter">&quot;</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<p>The above script can be executed, passing it the <code>maxTemperature</code> argument from any supported scripting language, e.g.:</p>
<pre class="code ruby"><code class="ruby">rules[<span class="string"><span class="delimiter">&quot;</span><span class="content">check_temp</span><span class="delimiter">&quot;</span></span>].trigger(<span class="key">maxTemperature</span>: <span class="integer">80</span> | <span class="string"><span class="delimiter">&quot;</span><span class="content">°C</span><span class="delimiter">&quot;</span></span>)
</code></pre>
<h3 id="gems"><a href="#gems" class="header-anchor">#</a>Gems</h3>
<p><a href="https://bundler.io/">Bundler</a> is integrated, enabling any <a href="https://rubygems.org/">Ruby gem</a> compatible with JRuby to be used within rules.
This permits easy access to the vast ecosystem of libraries within the Ruby community.
Gems are available using the <a href="https://bundler.io/guides/bundler_in_a_single_file_ruby_script.html">inline bundler syntax</a>.
The require statement can be omitted.</p>
<pre class="code ruby"><code class="ruby">gemfile <span class="keyword">do</span>
  source <span class="string"><span class="delimiter">'</span><span class="content">https://rubygems.org</span><span class="delimiter">'</span></span>
  gem <span class="string"><span class="delimiter">'</span><span class="content">json</span><span class="delimiter">'</span></span>, <span class="key">require</span>: <span class="predefined-constant">false</span>
  gem <span class="string"><span class="delimiter">'</span><span class="content">nap</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">1.1.0</span><span class="delimiter">'</span></span>, <span class="key">require</span>: <span class="string"><span class="delimiter">'</span><span class="content">rest</span><span class="delimiter">'</span></span>
<span class="keyword">end</span>

logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">The nap gem is at version </span><span class="inline"><span class="inline-delimiter">#{</span><span class="constant">REST</span>::<span class="constant">VERSION</span><span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)
</code></pre>
<h3 id="shared-code"><a href="#shared-code" class="header-anchor">#</a>Shared Code</h3>
<p>If you would like to easily share code among multiple scripts, you can place it in <code>&lt;OPENHAB_CONF&gt;/automation/ruby/lib</code>.
You can then simply <code>require</code> the file from your rules files.
Files located in <code>$RUBYLIB</code> won't be automatically loaded individually by openHAB, only when you <code>require</code> them.</p>
<p><code>automation/ruby/myrule.rb</code> OR a UI Rule's script:</p>
<pre class="code ruby"><code class="ruby">require <span class="string"><span class="delimiter">&quot;</span><span class="content">my_lib</span><span class="delimiter">&quot;</span></span>

logger.info(my_lib_version)
</code></pre>
<p><code>automation/ruby/lib/my_lib.rb</code></p>
<pre class="code ruby"><code class="ruby"><span class="keyword">def</span> <span class="function">my_lib_version</span>
  <span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span>
<span class="keyword">end</span>
</code></pre>
<h3 id="transformations"><a href="#transformations" class="header-anchor">#</a>Transformations</h3>
<h4 id="using-openhab-transformations"><a href="#using-openhab-transformations" class="header-anchor">#</a>Using openHAB Transformations <!-- raw HTML omitted --></h4>
<p>Existing openHAB transformations can also be used by calling the <span class='object_link'><a href="OpenHAB/DSL.html#transform-class_method" title="OpenHAB::DSL.transform (method)">transform</a></span> method.
This enables the use of any transformations from the <code>/transform</code> folder or managed through the UI, such as MAP, JSONPATH, Jinja Transformation, etc.</p>
<pre class="code ruby"><code class="ruby"><span class="comment"># Convert OPEN/CLOSED to Online/Offline using availability.map</span>
<span class="comment"># OPEN=Online</span>
<span class="comment"># CLOSED=OFFLINE</span>
logger.info transform(<span class="symbol">:map</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">availability.map</span><span class="delimiter">&quot;</span></span>, <span class="constant">LivingRoom_Switch_Availability</span>.state)
</code></pre>
<h4 id="writing-custom-transformations-in-ruby"><a href="#writing-custom-transformations-in-ruby" class="header-anchor">#</a>Writing Custom Transformations in Ruby <!-- raw HTML omitted --></h4>
<p>This add-on also provides the necessary infrastructure to use Ruby for writing <a href="https://www.openhab.org/docs/configuration/transformations.html">transformations</a>.</p>
<p>The main value to be transformed is given to the script in a variable called <code>input</code>.
Note that the values are passed to the transformation as Strings even for numeric items and data types.</p>
<p><strong>Note</strong>: In openHAB 3.4, due to an <a href="https://github.com/jruby/jruby/issues/5876">issue</a> in the current version of JRuby, you will need to begin your script with <code>input ||= nil</code> (and <code>a ||= nil</code> etc. for additional query variables) so that JRuby will recognize the variables as variables--rather than method calls--when it's parsing the script.
Otherwise you will get errors like <code>(NameError) undefined local variable or method 'input' for main:Object</code>.
This is not necessary in openHAB 4.0+.</p>
<h4 id="file-based-transformations"><a href="#file-based-transformations" class="header-anchor">#</a>File Based Transformations <!-- raw HTML omitted --></h4>
<p>Once the addon is installed, you can create a Ruby file in the <code>$OPENHAB_CONF/transform</code> directory, with the extension <code>.rb</code>.
When referencing the file, you need to specify the <code>RB</code> transform: <code>RB(mytransform.rb):%s</code>.</p>
<p>You can also specify additional variables to be set in the script using a URI-like query syntax: <code>RB(mytransform.rb?a=1&amp;b=c):%s</code> in order to share a single script with slightly different parameters for different items.</p>
<h5 id="example:-display-the-wind-direction-in-degrees-and-cardinal-direction"><a href="#example:-display-the-wind-direction-in-degrees-and-cardinal-direction" class="header-anchor">#</a>Example: Display the wind direction in degrees and cardinal direction <!-- raw HTML omitted --></h5>
<p><code>weather.items</code></p>
<pre class="code Xtend"><code class="Xtend">Number:Angle Exterior_WindDirection &quot;Wind Direction [RB(compass.rb):%s]&quot; &lt;wind&gt;
</code></pre>
<p><code>compass.rb</code></p>
<pre class="code ruby"><code class="ruby"><span class="constant">DIRECTIONS</span> = <span class="string"><span class="delimiter">%w[</span><span class="content">N NE E SE S SW W NW N</span><span class="delimiter">]</span></span>.freeze

<span class="keyword">if</span> input.nil? || input == <span class="string"><span class="delimiter">&quot;</span><span class="content">NULL</span><span class="delimiter">&quot;</span></span> || input == <span class="string"><span class="delimiter">&quot;</span><span class="content">UNDEF</span><span class="delimiter">&quot;</span></span>
  <span class="string"><span class="delimiter">&quot;</span><span class="content">-</span><span class="delimiter">&quot;</span></span>
<span class="keyword">else</span>
  cardinal = <span class="constant">DIRECTIONS</span>[(input.to_f / <span class="integer">45</span>).round]
  <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">#{</span>cardinal<span class="inline-delimiter">}</span></span><span class="content"> (</span><span class="inline"><span class="inline-delimiter">#{</span>input.to_f.round<span class="inline-delimiter">}</span></span><span class="content">°)</span><span class="delimiter">&quot;</span></span>
<span class="keyword">end</span>
</code></pre>
<p>Given a state of <code>82 °</code>, this will produce a formatted state of <code>E (82°)</code>.</p>
<h5 id="example:-display-the-number-of-lights-that-are-on/off-within-a-group"><a href="#example:-display-the-number-of-lights-that-are-on/off-within-a-group" class="header-anchor">#</a>Example: Display the number of lights that are on/off within a group <!-- raw HTML omitted --></h5>
<pre class="code Xtend"><code class="Xtend">Group gIndoorLights &quot;Indoor Lights [RB(group_count.rb?group=gIndoorLights):%s]&quot;
Group gOutdoorLights &quot;Outdoor Lights [RB(group_count.rb?group=gOutdoorLights):%s]&quot;
</code></pre>
<p><code>group_count.rb</code></p>
<pre class="code ruby"><code class="ruby">items[group].all_members.then { |all| <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">#{</span>all.select(&amp;<span class="symbol">:on?</span>).size<span class="inline-delimiter">}</span></span><span class="content">/</span><span class="inline"><span class="inline-delimiter">#{</span>all.size<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span> }
</code></pre>
<p>When 3 lights out of 10 lights are on, this will produce a formatted state of <code>3/10</code></p>
<h4 id="inline-transformations"><a href="#inline-transformations" class="header-anchor">#</a>Inline Transformations <!-- raw HTML omitted --></h4>
<p>Inline transformations are supported too.
For example, to display the temperature in both °C and °F:</p>
<pre class="code Xtend"><code class="Xtend">Number:Temperature Outside_Temperature &quot;Outside Temperature [RB(|  input.to_f.|(&#39;°C&#39;).then { |t| %(#{t.format(&#39;%d °C&#39;)} / #{t.to_unit(&#39;°F&#39;).format(&#39;%d °F&#39;)}) }   ):%s]&quot;
</code></pre>
<p>When the item contains <code>0 °C</code>, this will produce a formatted state of <code>0 °C / 32 °F</code>.</p>
<h3 id="profile"><a href="#profile" class="header-anchor">#</a>Profile</h3>
<p>You can create an openHAB profile in JRuby that can be applied to item channel links.
For more details, see <span class='object_link'><a href="OpenHAB/DSL.html#profile-class_method" title="OpenHAB::DSL.profile (method)">#profile</a></span>.</p>
<h3 id="sitemaps"><a href="#sitemaps" class="header-anchor">#</a>Sitemaps</h3>
<p>Sitemaps can be created via <span class='object_link'><a href="OpenHAB/Core/Sitemaps/Provider.html#build-instance_method" title="OpenHAB::Core::Sitemaps::Provider#build (method)">sitemaps.build</a></span>.</p>
<pre class="code ruby"><code class="ruby">sitemaps.build <span class="keyword">do</span>
  sitemap <span class="string"><span class="delimiter">&quot;</span><span class="content">default</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">My Residence</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
    frame <span class="key">label</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Control</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
      text <span class="key">label</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Climate</span><span class="delimiter">&quot;</span></span>, <span class="key">icon</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">if:mdi:home-thermometer-outline</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
        frame <span class="key">label</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Main Floor</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
          text <span class="key">item</span>: <span class="constant">MainFloor_AmbTemp</span>
          switch <span class="key">item</span>: <span class="constant">MainFloorThermostat_TargetMode</span>, <span class="key">label</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Mode</span><span class="delimiter">&quot;</span></span>, <span class="key">mappings</span>: <span class="string"><span class="delimiter">%w[</span><span class="content">off auto cool heat</span><span class="delimiter">]</span></span>
          setpoint <span class="key">item</span>: <span class="constant">MainFloorThermostat_SetPoint</span>, <span class="key">label</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Set Point</span><span class="delimiter">&quot;</span></span>, <span class="key">visibility</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MainFloorThermostat_TargetMode!=off</span><span class="delimiter">&quot;</span></span>
        <span class="keyword">end</span>
        frame <span class="key">label</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Basement</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
          text <span class="key">item</span>: <span class="constant">Basement_AmbTemp</span>
          switch <span class="key">item</span>: <span class="constant">BasementThermostat_TargetMode</span>, <span class="key">label</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Mode</span><span class="delimiter">&quot;</span></span>, <span class="key">mappings</span>: { <span class="key">OFF</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">off</span><span class="delimiter">&quot;</span></span>, <span class="key">COOL</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">cool</span><span class="delimiter">&quot;</span></span>, <span class="key">HEAT</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">heat</span><span class="delimiter">&quot;</span></span> }
          setpoint <span class="key">item</span>: <span class="constant">BasementThermostat_SetPoint</span>, <span class="key">label</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Set Point</span><span class="delimiter">&quot;</span></span>, <span class="key">visibility</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">BasementThermostat_TargetMode!=off</span><span class="delimiter">&quot;</span></span>
        <span class="keyword">end</span>
      <span class="keyword">end</span>
    <span class="keyword">end</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<h2 id="file-based-rules"><a href="#file-based-rules" class="header-anchor">#</a>File Based Rules</h2>
<h3 id="basic-rule-structure"><a href="#basic-rule-structure" class="header-anchor">#</a>Basic Rule Structure</h3>
<p>See <span class='object_link'><a href="OpenHAB/DSL/Rules/Builder.html" title="OpenHAB::DSL::Rules::Builder (class)">OpenHAB::DSL::Rules::Builder</a></span> for full details.</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  &lt;one <span class="keyword">or</span> more triggers&gt;
  &lt;one <span class="keyword">or</span> more execution blocks&gt;
  &lt;zero <span class="keyword">or</span> more guards <span class="keyword">or</span> conditions&gt;
<span class="keyword">end</span>
</code></pre>
<p>Jump to: <a href="#rule-triggers">Rule Triggers</a>, <a href="#rule-executions">Rule Executions</a>, <a href="#rule-conditions">Rule Conditions</a></p>
<h3 id="rule-triggers"><a href="#rule-triggers" class="header-anchor">#</a>Rule Triggers</h3>
<h4 id="item-or-thing-changed"><a href="#item-or-thing-changed" class="header-anchor">#</a>Item or Thing Changed</h4>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Log (or notify) when the secret door is open</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  changed <span class="constant">SecretDoor</span>, <span class="key">to</span>: <span class="constant">OPEN</span>
  run { |event| logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">#{</span>event.item<span class="inline-delimiter">}</span></span><span class="content"> is opened</span><span class="delimiter">&quot;</span></span>) }
<span class="keyword">end</span>
</code></pre>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Log when Fronius Inverter goes offline</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  changed things[<span class="string"><span class="delimiter">&quot;</span><span class="content">fronius:bridge:mybridge</span><span class="delimiter">&quot;</span></span>], <span class="key">from</span>: <span class="symbol">:online</span>, <span class="key">to</span>: <span class="symbol">:offline</span>
  run { |event| logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Thing </span><span class="inline"><span class="inline-delimiter">#{</span>event.uid<span class="inline-delimiter">}</span></span><span class="content"> went </span><span class="inline"><span class="inline-delimiter">#{</span>event.status<span class="inline-delimiter">}</span></span><span class="content">!</span><span class="delimiter">&quot;</span></span>) }
<span class="keyword">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#changed-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#changed (method)">#changed</a></span></p>
<h5 id="detecting-change-duration"><a href="#detecting-change-duration" class="header-anchor">#</a>Detecting Change Duration <!-- raw HTML omitted --></h5>
<p>Only execute a rule when an item state changed and stayed the same for a period of time.
This method can only be done using a file-based rule.</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Garage Door Alert</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  changed <span class="constant">GarageDoor</span>, <span class="key">to</span>: <span class="constant">OPEN</span>, <span class="key">for</span>: <span class="integer">20</span>.minutes
  run { <span class="constant">Voice</span>.say <span class="string"><span class="delimiter">&quot;</span><span class="content">The garage door has been open for 20 minutes!</span><span class="delimiter">&quot;</span></span> }
<span class="keyword">end</span>
</code></pre>
<h4 id="item-updated"><a href="#item-updated" class="header-anchor">#</a>Item Updated</h4>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Calculate</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  updated <span class="constant">Camera_Event_Data</span>
  run <span class="keyword">do</span> |event|
    logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Camera event: </span><span class="inline"><span class="inline-delimiter">#{</span>event.state<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#updated-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#updated (method)">#updated</a></span></p>
<h4 id="item-received-a-command"><a href="#item-received-a-command" class="header-anchor">#</a>Item Received a Command</h4>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Received a command</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  received_command <span class="constant">DoorBell</span>, <span class="key">command</span>: <span class="constant">ON</span>
  run <span class="keyword">do</span> |event|
    <span class="constant">Notification</span>.send <span class="string"><span class="delimiter">&quot;</span><span class="content">Someone pressed the door bell</span><span class="delimiter">&quot;</span></span>
    play_sound <span class="string"><span class="delimiter">&quot;</span><span class="content">doorbell.mp3</span><span class="delimiter">&quot;</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#received_command-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#received_command (method)">#received_command</a></span></p>
<h4 id="member-of-group-trigger"><a href="#member-of-group-trigger" class="header-anchor">#</a>Member-of-Group Trigger</h4>
<p>Add <code>.members</code> to the GroupItem in order to trigger on its members.</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Trigger by Member of</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  changed gGroupName.members
  run <span class="keyword">do</span> |event|
    logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Triggered item: </span><span class="inline"><span class="inline-delimiter">#{</span>event.item.name<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<h4 id="script-is-loaded"><a href="#script-is-loaded" class="header-anchor">#</a>Script is Loaded</h4>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">initialize things</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  on_load <span class="comment"># This triggers whenever the script (re)loads</span>
  run { logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Here we go!</span><span class="delimiter">&quot;</span></span> }
<span class="keyword">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#on_load-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#on_load (method)">#on_load</a></span></p>
<h4 id="openhab-system-started"><a href="#openhab-system-started" class="header-anchor">#</a>openHAB System Started</h4>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">System startup rule</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  on_start <span class="key">at_level</span>: <span class="integer">80</span>
  run { logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">I'm glad to be alive!</span><span class="delimiter">&quot;</span></span> }
<span class="keyword">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#on_start-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#on_start (method)">#on_start</a></span></p>
<h4 id="cron-trigger"><a href="#cron-trigger" class="header-anchor">#</a>Cron Trigger</h4>
<p>Traditional cron trigger:</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">cron rule</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  cron <span class="string"><span class="delimiter">&quot;</span><span class="content">0 0,15 15-19 L * ?</span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="content">
  run { logger.info </span><span class="delimiter">&quot;</span></span><span class="constant">Cron</span> run<span class="string"><span class="delimiter">&quot;</span><span class="content"> }
end
</span></span></code></pre>
<p>Or an easier syntax:</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">cron rule</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  cron <span class="key">second</span>: <span class="integer">0</span>, <span class="key">minute</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">0,15</span><span class="delimiter">&quot;</span></span>, <span class="key">hour</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">15-19</span><span class="delimiter">&quot;</span></span>, <span class="key">dom</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">L</span><span class="delimiter">&quot;</span></span>
  run { logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Cron run</span><span class="delimiter">&quot;</span></span> }
<span class="keyword">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#cron-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#cron (method)">#cron</a></span></p>
<h5 id="every-trigger"><a href="#every-trigger" class="header-anchor">#</a><code>every</code> Trigger <!-- raw HTML omitted --></h5>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">run every day</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  every <span class="symbol">:day</span>, <span class="key">at</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2:35pm</span><span class="delimiter">&quot;</span></span>
  run { <span class="constant">Amazon_Echo_TTS</span> &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">It's time to pick up the kids!</span><span class="delimiter">&quot;</span></span> }
<span class="keyword">end</span>
</code></pre>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">run every 5 mins</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  every <span class="integer">5</span>.minutes
  run { logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">openHAB is awesome</span><span class="delimiter">&quot;</span></span> }
<span class="keyword">end</span>
</code></pre>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Anniversary Reminder</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  every <span class="string"><span class="delimiter">&quot;</span><span class="content">10-15</span><span class="delimiter">&quot;</span></span> <span class="comment"># This takes a MM-DD syntax to trigger on 15th of October at midnight</span>
  run <span class="keyword">do</span>
    things[<span class="string"><span class="delimiter">&quot;</span><span class="content">mail:smtp:mymailthing</span><span class="delimiter">&quot;</span></span>].send_mail(<span class="string"><span class="delimiter">&quot;</span><span class="content">me@example.com</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Anniversary Reminder!</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Today is your anniversary!</span><span class="delimiter">&quot;</span></span>)
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#every-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#every (method)">#every</a></span></p>
<h4 id="datetimeitem-trigger"><a href="#datetimeitem-trigger" class="header-anchor">#</a>DateTimeItem Trigger</h4>
<p>To trigger based on the date and time stored in a DateTime item, use <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#at-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#at (method)">at ItemName</a></span>:</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">DateTime Trigger</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  at <span class="constant">My_DateTimeItem</span>
  run <span class="keyword">do</span> |event|
    logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Triggered by </span><span class="inline"><span class="inline-delimiter">#{</span>event.item<span class="inline-delimiter">}</span></span><span class="content"> at </span><span class="inline"><span class="inline-delimiter">#{</span>event.item.state<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<p>To trigger based on only the <em>time</em> part of a DateTime item, use <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#every-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#every (method)">every :day, at: ItemName</a></span>:</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">TimeOnly Trigger</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  every <span class="symbol">:day</span>, <span class="key">at</span>: <span class="constant">My_DateTimeItem</span>
  run <span class="keyword">do</span> |event|
    logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Triggered by </span><span class="inline"><span class="inline-delimiter">#{</span>event.item<span class="inline-delimiter">}</span></span><span class="content"> at </span><span class="inline"><span class="inline-delimiter">#{</span>event.item.state<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<h4 id="other-triggers"><a href="#other-triggers" class="header-anchor">#</a>Other Triggers</h4>
<p>There are more triggers supported by this library.
See the <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#Triggers-group" title="group::OpenHAB::DSL::Rules::BuilderDSL::Triggers (group)">full list of supported triggers</a></span>.</p>
<h4 id="combining-multiple-triggers"><a href="#combining-multiple-triggers" class="header-anchor">#</a>Combining Multiple Triggers</h4>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">multiple triggers</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  changed <span class="constant">Switch1</span>, <span class="key">to</span>: <span class="constant">ON</span>
  changed <span class="constant">Switch2</span>, <span class="key">to</span>: <span class="constant">ON</span>
  run { |event| logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Switch: </span><span class="inline"><span class="inline-delimiter">#{</span>event.item.name<span class="inline-delimiter">}</span></span><span class="content"> changed to: </span><span class="inline"><span class="inline-delimiter">#{</span>event.state<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span> }
<span class="keyword">end</span>
</code></pre>
<p>When the trigger conditions are the same, the triggers can be combined.</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">multiple triggers</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  changed <span class="constant">Switch1</span>, <span class="constant">Switch2</span>, <span class="key">to</span>: <span class="constant">ON</span>
  run { |event| logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Switch: </span><span class="inline"><span class="inline-delimiter">#{</span>event.item.name<span class="inline-delimiter">}</span></span><span class="content"> changed to: </span><span class="inline"><span class="inline-delimiter">#{</span>event.state<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span> }
<span class="keyword">end</span>
</code></pre>
<h4 id="combining-multiple-conditions"><a href="#combining-multiple-conditions" class="header-anchor">#</a>Combining Multiple Conditions</h4>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">multiple conditions</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  changed <span class="constant">Button_Action</span>, <span class="key">to</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">single</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">double</span><span class="delimiter">&quot;</span></span>]
  run { |event| logger.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Action: </span><span class="inline"><span class="inline-delimiter">#{</span>event.state<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span> }
<span class="keyword">end</span>
</code></pre>
<h3 id="rule-conditions"><a href="#rule-conditions" class="header-anchor">#</a>Rule Conditions</h3>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">motion sensor</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  updated <span class="constant">Motion_Sensor</span>, <span class="key">to</span>: <span class="constant">ON</span>
  only_if { <span class="constant">Sensor_Enable</span>.on? } <span class="comment"># Run rule only if Sensor_Enable item is ON</span>
  not_if { <span class="constant">Sun_Elevation</span>.positive? } <span class="comment"># and not while the sun is up</span>
  run { <span class="constant">LightItem</span>.on }
<span class="keyword">end</span>
</code></pre>
<p>Restrict Rule Executions to Certain Time of Day:</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">doorbell</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  updated <span class="constant">DoorBell_Button</span>, <span class="key">to</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">single</span><span class="delimiter">&quot;</span></span>
  between <span class="string"><span class="delimiter">&quot;</span><span class="content">6am</span><span class="delimiter">&quot;</span></span>..<span class="string"><span class="delimiter">&quot;</span><span class="content">8:30pm</span><span class="delimiter">&quot;</span></span>
  run { play_sound <span class="string"><span class="delimiter">&quot;</span><span class="content">doorbell_chime.mp3</span><span class="delimiter">&quot;</span></span> }
<span class="keyword">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#Guards-group" title="group::OpenHAB::DSL::Rules::BuilderDSL::Guards (group)">Rule Guards</a></span></p>
<h3 id="rule-executions"><a href="#rule-executions" class="header-anchor">#</a>Rule Executions</h3>
<p>Execution blocks are executed when a rule is triggered and all the rule conditions are met.
Multiple execution blocks can be specified.
This can be useful especially when using a delay execution block inbetween two run or triggered blocks.</p>
<h4 id="run-execution-block"><a href="#run-execution-block" class="header-anchor">#</a>Run Execution Block</h4>
<p>A run execution block is the most commonly used execution block.
It provides the full <a href="#event-object">event object</a> to the block.</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Rule with a run block</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  received_command <span class="constant">SwitchItem1</span>
  run <span class="keyword">do</span> |event|
    logger.info <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">#{</span>event.item<span class="inline-delimiter">}</span></span><span class="content"> received this command: </span><span class="inline"><span class="inline-delimiter">#{</span>event.command<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<h4 id="triggered-execution-block"><a href="#triggered-execution-block" class="header-anchor">#</a>Triggered Execution Block</h4>
<p>A triggered execution block passes the <code>TriggeringItem</code> object directly to the block.
It is handy when combined with Ruby's pretzel-colon operator to act directly on the object.</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Limit the duration of TV watching</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  changed gTVPower.members, <span class="key">to</span>: <span class="constant">ON</span>, <span class="key">for</span>: <span class="integer">2</span>.hours
  triggered(&amp;<span class="symbol">:off</span>)
<span class="keyword">end</span>
</code></pre>
<h4 id="delay-execution-block"><a href="#delay-execution-block" class="header-anchor">#</a>Delay Execution Block</h4>
<p>A delay exection block is useful for adding a delay inbetween rule executions or even at the beginning of the trigger event without having to manually create a timer.
Unlike <code>sleep</code>, a delay block does not block the current executing thread.
It actually sets a timer for you behind the scenes.</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Check for offline things 15 minutes after openHAB had started</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  on_start
  delay <span class="integer">15</span>.minutes
  run <span class="keyword">do</span>
    offline_things = things.select(&amp;<span class="symbol">:offline?</span>).map(&amp;<span class="symbol">:uid</span>).join(<span class="string"><span class="delimiter">&quot;</span><span class="content">, </span><span class="delimiter">&quot;</span></span>)
    <span class="constant">Notification</span>.send(<span class="string"><span class="delimiter">&quot;</span><span class="content">Things that are still offline: </span><span class="inline"><span class="inline-delimiter">#{</span>offline_things<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#Execution-Blocks-group" title="group::OpenHAB::DSL::Rules::BuilderDSL::Execution-Blocks (group)">Execution Blocks</a></span></p>
<h3 id="terse-rules"><a href="#terse-rules" class="header-anchor">#</a>Terse Rules</h3>
<p>A rule with a trigger and an execution block can be created with just one line.</p>
<pre class="code ruby"><code class="ruby">received_command(<span class="constant">My_Switch</span>, <span class="key">command</span>: <span class="constant">ON</span>) { <span class="constant">My_Light</span>.on }
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL/Rules/Terse.html" title="OpenHAB::DSL::Rules::Terse (module)">Terse Rules</a></span> for full details.</p>
<h3 id="early-exit-from-a-rule"><a href="#early-exit-from-a-rule" class="header-anchor">#</a>Early Exit From a Rule</h3>
<p>You can use <code>next</code> within a file-based rule, because it's in a block:</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">doorbell</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  updated <span class="constant">DoorBell_Button</span>, <span class="key">to</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">single</span><span class="delimiter">&quot;</span></span>
  run <span class="keyword">do</span>
    <span class="keyword">next</span> <span class="keyword">unless</span> <span class="constant">Time</span>.now.between?(<span class="string"><span class="delimiter">&quot;</span><span class="content">6am</span><span class="delimiter">&quot;</span></span>..<span class="string"><span class="delimiter">&quot;</span><span class="content">8:30pm</span><span class="delimiter">&quot;</span></span>)

    play_sound <span class="string"><span class="delimiter">&quot;</span><span class="content">doorbell_chime.mp3</span><span class="delimiter">&quot;</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span>

</code></pre>
<p>Use <code>return</code> within a UI rule:</p>
<pre class="code ruby"><code class="ruby"><span class="keyword">return</span> <span class="keyword">unless</span> <span class="constant">Time</span>.now.between?(<span class="string"><span class="delimiter">&quot;</span><span class="content">6am</span><span class="delimiter">&quot;</span></span>..<span class="string"><span class="delimiter">&quot;</span><span class="content">8:30pm</span><span class="delimiter">&quot;</span></span>)

play_sound <span class="string"><span class="delimiter">&quot;</span><span class="content">doorbell_chime.mp3</span><span class="delimiter">&quot;</span></span>
</code></pre>
<h3 id="dynamic-generation-of-rules"><a href="#dynamic-generation-of-rules" class="header-anchor">#</a>Dynamic Generation of Rules</h3>
<p>The rule definition itself is just Ruby code, which means you can use code to generate your rules.
Take care when doing this as the the items/groups are processed when the rules file is processed, meaning that new items/groups will not automatically generate new rules.</p>
<pre class="code ruby"><code class="ruby">rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Log whenever a Virtual Switch Changes</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  items.grep(<span class="constant">SwitchItem</span>)
       .select { |item| item.label&amp;.include?(<span class="string"><span class="delimiter">&quot;</span><span class="content">Virtual</span><span class="delimiter">&quot;</span></span>) }
       .each <span class="keyword">do</span> |item|
         changed item
       <span class="keyword">end</span>

  run { |event| logger.info <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">#{</span>event.item.name<span class="inline-delimiter">}</span></span><span class="content"> changed from </span><span class="inline"><span class="inline-delimiter">#{</span>event.was<span class="inline-delimiter">}</span></span><span class="content"> to </span><span class="inline"><span class="inline-delimiter">#{</span>event.state<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span> }
<span class="keyword">end</span>
</code></pre>
<p>This rule is effectively the same:</p>
<pre class="code ruby"><code class="ruby">virtual_switches = items.grep(<span class="constant">SwitchItem</span>)
                        .select { |item| item.label&amp;.include?(<span class="string"><span class="delimiter">&quot;</span><span class="content">Virtual</span><span class="delimiter">&quot;</span></span>) }

rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Log whenever a Virtual Switch Changes 2</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  changed(*virtual_switches)
  run { |event| logger.info <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">#{</span>event.item.name<span class="inline-delimiter">}</span></span><span class="content"> changed from </span><span class="inline"><span class="inline-delimiter">#{</span>event.was<span class="inline-delimiter">}</span></span><span class="content"> to </span><span class="inline"><span class="inline-delimiter">#{</span>event.state<span class="inline-delimiter">}</span></span><span class="content"> 2</span><span class="delimiter">&quot;</span></span> }
<span class="keyword">end</span>
</code></pre>
<p>This will accomplish the same thing, but create a new rule for each virtual switch:</p>
<pre class="code ruby"><code class="ruby">virtual_switches = items.grep(<span class="constant">SwitchItem</span>)
                        .select { |item| item.label&amp;.include?(<span class="string"><span class="delimiter">&quot;</span><span class="content">Virtual</span><span class="delimiter">&quot;</span></span>) }

virtual_switches.each <span class="keyword">do</span> |switch|
  rule <span class="string"><span class="delimiter">&quot;</span><span class="content">Log whenever a </span><span class="inline"><span class="inline-delimiter">#{</span>switch.label<span class="inline-delimiter">}</span></span><span class="content"> Changes</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
    changed switch
    run { |event| logger.info <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">#{</span>event.item.name<span class="inline-delimiter">}</span></span><span class="content"> changed from </span><span class="inline"><span class="inline-delimiter">#{</span>event.was<span class="inline-delimiter">}</span></span><span class="content"> to </span><span class="inline"><span class="inline-delimiter">#{</span>event.state<span class="inline-delimiter">}</span></span><span class="content"> 2</span><span class="delimiter">&quot;</span></span> }
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<h3 id="scenes-and-scripts"><a href="#scenes-and-scripts" class="header-anchor">#</a>Scenes and Scripts</h3>
<p>A <code>scene</code> can be created using the <span class='object_link'><a href="OpenHAB/DSL.html#scene-class_method" title="OpenHAB::DSL.scene (method)">.scene</a></span> method.</p>
<pre class="code ruby"><code class="ruby">scene <span class="string"><span class="delimiter">&quot;</span><span class="content">Movie</span><span class="delimiter">&quot;</span></span>, <span class="key">id</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">movie</span><span class="delimiter">&quot;</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Set up the theatre for movie watching</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
  <span class="constant">Theatre_Window_Blinds</span>.down
  <span class="constant">Theatre_Screen_Curtain</span>.up
  <span class="constant">Theatre_Mood_Light</span>.on
  <span class="constant">Theatre_Light</span>.off
  <span class="constant">Theatre_Projector</span>.on
  <span class="constant">Theatre_Receiver</span>.on
<span class="keyword">end</span>
</code></pre>
<p>To create a <code>script</code>, use the <span class='object_link'><a href="OpenHAB/DSL.html#script-class_method" title="OpenHAB::DSL.script (method)">.script</a></span> method.
Note that scripts can be executed with additional contexts.</p>
<h3 id="hooks"><a href="#hooks" class="header-anchor">#</a>Hooks</h3>
<p>File based scripts can also register <span class='object_link'><a href="OpenHAB/Core/ScriptHandling.html" title="OpenHAB::Core::ScriptHandling (module)">hooks</a></span> that will be called when the script has completed loading (<code>script_loaded</code>) and when it gets unloaded (<code>script_unloaded</code>).</p>
<pre class="code ruby"><code class="ruby">x = <span class="integer">1</span>

script_loaded <span class="keyword">do</span>
  logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">script loaded!</span><span class="delimiter">&quot;</span></span>)
  logger.info(x) <span class="comment"># this will log 2, since it won't execute until the entire script loads.</span>
<span class="keyword">end</span>

x = <span class="integer">2</span>

script_unloaded <span class="keyword">do</span>
  logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">script unloaded</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">end</span>
</code></pre>
<h2 id="calling-java-from-jruby"><a href="#calling-java-from-jruby" class="header-anchor">#</a>Calling Java From JRuby</h2>
<p>JRuby can <a href="https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby">access almost any Java object</a> that's available in the current JVM.
This is how the library is implemented internally.</p>
<pre class="code ruby"><code class="ruby"><span class="comment"># you can `java_import` classes and interfaces, which will become Ruby constants</span>
java_import java.time.format.DateTimeFormatter

formatter = <span class="constant">DateTimeFormatter</span>.of_pattern(<span class="string"><span class="delimiter">&quot;</span><span class="content">yyyy MM dd</span><span class="delimiter">&quot;</span></span>)

<span class="comment"># or you can just reference them directly to avoid polluting the global namespace</span>
formatter = java.time.format.DateTimeFormatter.of_pattern(<span class="string"><span class="delimiter">&quot;</span><span class="content">yyyy MM dd</span><span class="delimiter">&quot;</span></span>)
</code></pre>
<h2 id="full-documentation"><a href="#full-documentation" class="header-anchor">#</a>Full Documentation</h2>
<p>Visit <a href="https://openhab.github.io/openhab-jruby/">https://openhab.github.io/openhab-jruby/</a> for the full documentation of the <strong>openHAB JRuby Helper Library</strong>.</p>
</div></div>

        <footer>
  Generated on Sat Jul  6 00:03:00 2024 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-3.1.3).
</footer>

      </main>
    </div>
  </body>
</html>
